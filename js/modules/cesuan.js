// 测算验证模块
import { calculateBazi } from '../core/utils.js';

export class CesuanModule {
    static getServiceConfig() {
        return {
            name: '测算验证',
            description: '基本命理验证服务',
            features: [
                '八字排盘',
                '性格分析',
                '职业推荐',
                '富贵层次评估',
                '过往大运吉凶分析',
                '过往关键流年验证',
                '专业建议与指导'
            ]
        };
    }
    
    static getPrompt(userData, partnerData = null) {
        return `你是一位职业的命理大师，请根据以下用户信息用真太阳时排盘八字进行命理分析：

用户信息：
姓名：${userData.name}
性别：${userData.gender}
出生时间：${userData.birthYear}年${userData.birthMonth}月${userData.birthDay}日${userData.birthHour}时${userData.birthMinute}分
出生城市：${userData.birthCity}

请先进行八字排盘，再进行大运排盘{大运顺逆规则：阳男阴女顺行、阴男阳女逆行。起运岁数去零取整数，要确保精准，计算规则：1、如果大运顺行，先确认下一个节令日时间，然后计算相差天数 = (下一个节气日时间 - 出生时间)，再计算起运岁数 = 相差天数 ÷ 3天/岁；2、如果大运逆行，先确认上一个节令日时间，然后计算相差天数 = (出生时间 - 上一个节气时间)，最后计算起运岁数 = 相差天数 ÷ 3天/岁}。然后用以下格式输出结果：

【八字排盘】
年柱：[年柱干支] ([纳音])
月柱：[月柱干支] ([纳音])
日柱：[日柱干支] ([纳音])
时柱：[时柱干支] ([纳音])

【大运排盘】
岁：[第一步大运起运岁数] [第二步大运起运岁数] [第三步大运起运岁数] [第四步大运起运岁数] [第五步大运起运岁数] [第六步大运起运岁数] [第七步大运起运岁数] [第八步大运起运岁数]
大运：[第一步大运干支] [第二步大运干支] [第三步大运干支] [第四步大运干支] [第五步大运干支] [第六步大运干支] [第七步大运干支] [第八步大运干支]

不用输出八字排盘、大运排盘的分析过程

【八字喜用分析】
用穷通宝鉴、子平真诠、三名通会六十甲子日时断深入分析八字喜用。

【性格特点】
详细解读用户性格特点，包括优点、缺点和个性倾向。

【适宜行业职业推荐】
根据八字喜用和五行属性，推荐适合的行业和职业发展方向。

【富贵层次评估】
根据第一条八字喜用分析的结果，评估用户的富贵层次，包括财富、事业和社会地位等方面的潜力。

【过往大运吉凶分析】
分析用户过往大运的吉凶情况，指出关键时期和转折点。

【过往关键流年验证】
验证用户过往关键流年的运势，与实际经历进行对照分析。

【专业建议与指导】
提供专业的命理建议和发展指导，帮助用户把握未来机遇。

要求：
1. 回复字数控制在2800-3000字之间
2. 使用纯文本格式，不要使用任何markdown符号
3. 回复内容要专业、详细但易懂
4. 分析要直接明了，不要有"首先"、"然后"等过程性词语
5. 严格按照上述格式输出，每个部分以【标题】开头`;
    }
    
    static calculateBazi(userData) {
        return calculateBazi(userData);
    }
}

















