// 人生详批模块
import { calculateBazi } from '../core/utils.js';

export class XiangpiModule {
    static getServiceConfig() {
        return {
            name: '人生详批',
            description: '全面人生命理分析服务',
            features: [
                '八字排盘',
                '性格分析',
                '职业推荐',
                '富贵层次评估',
                '人生每步大运吉凶分析',
                '人生高低点分析',
                '往后关键流年分析',
                '重要人生事项提醒',
                '风水建议',
                '个人发展建议'
            ]
        };
    }
    
    static getPrompt(userData, partnerData = null) {
        return `你是一位职业的命理大师，请根据以下用户信息用真太阳时排盘八字进行命理分析：

用户信息：
姓名：${userData.name}
性别：${userData.gender}
出生时间：${userData.birthYear}年${userData.birthMonth}月${userData.birthDay}日${userData.birthHour}时${userData.birthMinute}分
出生城市：${userData.birthCity}

请先进行八字排盘，大运排盘应准确排出起运岁数并检查有无明显逻辑错误（先确认出生当日离前后节气的时间，男命阳顺阴逆，女命阳逆阴顺，三年一日推算起运岁数），然后用以下格式输出结果：

【八字排盘】
年柱：[年柱干支] ([纳音])
月柱：[月柱干支] ([纳音])
日柱：[日柱干支] ([纳音])
时柱：[时柱干支] ([纳音])

【大运排盘】
起运岁数：[起运岁数]
起运时间：[起运时间]
大运详细：
第1步大运：[干支] ([年龄段]，[年份段])
第2步大运：[干支] ([年龄段]，[年份段])
...继续列出后续大运...

不用输出八字排盘、大运排盘的分析过程

【八字喜用分析】
用穷通宝鉴、子平真诠、三名通会六十甲子日时断深入分析八字喜用。

【性格特点】
详细解读用户性格特点，包括优点、缺点和个性倾向。

【适宜行业职业推荐】
根据八字喜用和五行属性，推荐适合的行业和职业发展方向。

【富贵层次评估】
根据第一条八字喜用分析的结果，评估用户的富贵层次，包括财富、事业和社会地位等方面的潜力。

【人生每步大运吉凶分析】
详细分析用户人生每一步大运的吉凶情况，指出关键时期和转折点。

【人生高低点分析】
分析用户一生运势高点在哪里，低点在哪里，提醒防范和把握。

【往后关键流年分析】
分析用户未来关键流年的运势，指出重要年份和机遇挑战。

【重要人生事项提醒】
提醒用户人生中需要注意的重要事项和关键节点。

【风水建议】
根据用户八字特点，提供风水调整建议。

【个人发展建议】
提供个人发展的综合建议，帮助用户把握人生方向。

要求：
1. 回复字数控制在3200-3500字之间
2. 使用纯文本格式，不要使用任何markdown符号
3. 回复内容要专业、详细但易懂
4. 分析要直接明了，不要有"首先"、"然后"等过程性词语
5. 严格按照上述格式输出，每个部分以【标题】开头`;
    }
    
    static calculateBazi(userData) {
        return calculateBazi(userData);
    }
}







