<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¶¦è—å…«å­—ã€å…«å­—ç®—å‘½ã€å…«å­—æ’ç›˜ã€å…«å­—å‘½ç†ã€å‘½ç†åˆ†ææœåŠ¡å¹³å°</title>
    <style>
        /* åŸºç¡€æ ·å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', 'Segoe UI', sans-serif;
        }
        
        :root {
            --primary-color: #8b4513;
            --secondary-color: #d4af37;
            --accent-color: #5c3d2e;
            --light-color: #f5f1e8;
            --dark-color: #3a2c1e;
            --text-color: #333;
            --border-color: #ddd;
            --error-color: #dc3545;
            --success-color: #28a745;
        }
        
        body {
            background-color: var(--light-color);
            color: var(--text-color);
            line-height: 1.6;
        }
        
        /* å…è´£å£°æ˜æ»šåŠ¨æ¡ */
        .disclaimer-bar {
            background: linear-gradient(135deg, var(--accent-color), var(--dark-color));
            color: white;
            padding: 10px 0;
            overflow: hidden;
            position: relative;
            font-size: 14px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .disclaimer-wrapper {
            display: flex;
            width: max-content;
            animation: scrollLeft 30s linear infinite;
        }
        
        .disclaimer-content {
            white-space: nowrap;
            padding: 0 20px;
        }
        
        @keyframes scrollLeft {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        
        /* å¯¼èˆªæ  */
        header {
            background: white;
            padding: 10px 15px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.08);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .service-nav {
            display: flex;
            list-style: none;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .service-nav a {
            text-decoration: none;
            color: var(--text-color);
            font-weight: 600;
            padding: 6px 15px;
            border-radius: 25px;
            transition: all 0.3s ease;
            font-size: 14px;
            white-space: nowrap;
        }
        
        .service-nav a:hover {
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3);
        }
        
        .service-nav a.active {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            box-shadow: 0 4px 12px rgba(139, 69, 19, 0.3);
        }
        
        /* ä¸»å®¹å™¨ - æ— ç¼é•¿å›¾æ•ˆæœ */
        .seamless-container {
            position: relative;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        /* æ— ç¼é•¿å›¾éƒ¨åˆ† */
        .seamless-section {
            position: relative;
            width: 100%;
            margin: 0;
            padding: 0;
        }
        
        /* è‹±é›„å›¾éƒ¨åˆ† - ä¼˜åŒ–å›¾ç‰‡æ˜¾ç¤º */
        .hero-section {
            height: 50vh;
            min-height: 300px;
            max-height: 400px;
            overflow: hidden;
            position: relative;
            background-color: #f0e6d6; /* å›¾ç‰‡åŠ è½½å‰çš„èƒŒæ™¯è‰² */
        }
        
        .hero-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            display: block;
            transition: opacity 0.5s ease;
            opacity: 0; /* åˆå§‹é€æ˜ */
        }
        
        .hero-image.loaded {
            opacity: 1; /* åŠ è½½å®Œæˆåæ˜¾ç¤º */
        }
        
        /* å›¾ç‰‡åŠ è½½ä¸­çš„å ä½ç¬¦ */
        .image-placeholder {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #f5f1e8, #e8dfd0);
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--primary-color);
            font-size: 16px;
            font-weight: 600;
        }
        
        /* ä¿¡æ¯å¡«å†™åŒºåŸŸ - æ— ç¼è¿æ¥ */
        .info-section {
            background: white;
            padding: 20px 25px;
            position: relative;
            z-index: 2;
        }
        
        .info-section::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 0;
            right: 0;
            height: 20px;
            background: linear-gradient(to bottom, transparent, white);
            z-index: 1;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 15px;
        }
        
        .section-title h2 {
            color: var(--primary-color);
            font-size: 20px;
            margin-bottom: 8px;
            position: relative;
            display: inline-block;
        }
        
        .section-title h2::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            border-radius: 2px;
        }
        
        .section-title p {
            color: #666;
            font-size: 13px;
            margin-top: 8px;
        }
        
        /* ä¼˜åŒ–è¡¨å•å¸ƒå±€ */
        .form-container {
            width: 100%;
            margin: 0 auto;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-row {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        
        .form-row .form-group {
            flex: 1;
            margin-bottom: 0;
            min-width: 120px;
        }
        
        .birth-time-group {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border: 1px solid var(--border-color);
        }
        
        .birth-time-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--dark-color);
            font-size: 14px;
        }
        
        label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: var(--dark-color);
            font-size: 13px;
        }
        
        label.required::after {
            content: '*';
            color: var(--error-color);
            margin-left: 4px;
        }
        
        input, select {
            width: 100%;
            padding: 8px 10px;
            border: 1.5px solid var(--border-color);
            border-radius: 6px;
            font-size: 13px;
            transition: all 0.3s ease;
            background: white;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.2);
        }
        
        .error {
            color: var(--error-color);
            font-size: 11px;
            margin-top: 4px;
            display: none;
        }
        
        /* ä¼´ä¾£ä¿¡æ¯åŒºåŸŸ */
        .partner-info-section {
            background: linear-gradient(135deg, #f9f5f0, #f0e6d6);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border: 2px dashed var(--secondary-color);
        }
        
        .partner-info-section h3 {
            color: var(--primary-color);
            margin-bottom: 12px;
            text-align: center;
            font-size: 18px;
        }
        
        /* æ˜ç»†å›¾éƒ¨åˆ† - ä¼˜åŒ–å›¾ç‰‡æ˜¾ç¤º */
        .detail-section {
            height: 50vh;
            min-height: 300px;
            max-height: 400px;
            overflow: hidden;
            margin-top: 0;
            position: relative;
            background-color: #f0e6d6; /* å›¾ç‰‡åŠ è½½å‰çš„èƒŒæ™¯è‰² */
        }
        
        .detail-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            display: block;
            transition: opacity 0.5s ease;
            opacity: 0; /* åˆå§‹é€æ˜ */
        }
        
        .detail-image.loaded {
            opacity: 1; /* åŠ è½½å®Œæˆåæ˜¾ç¤º */
        }
        
        /* åŠ¨æ€æ‹‰ä¼¸æŒ‰é’®æ ·å¼ */
        .dynamic-pulse-btn {
            display: block;
            width: 100%;
            max-width: 250px;
            margin: 20px auto 15px;
            padding: 14px 25px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            transform-origin: center;
        }
        
        /* åŠ¨æ€æ‹‰ä¼¸åŠ¨ç”» */
        .dynamic-pulse-btn.stretching {
            animation: stretchAnimation 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }
        
        @keyframes stretchAnimation {
            0% {
                width: 100%;
                max-width: 250px;
            }
            50% {
                transform: scaleX(1.1);
            }
            100% {
                width: 75vw;
                max-width: 75vw;
                transform: scaleX(1);
            }
        }
        
        .dynamic-pulse-btn:hover:not(.stretching) {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(139, 69, 19, 0.3);
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
        }
        
        .dynamic-pulse-btn:active {
            transform: translateY(-1px);
        }
        
        .dynamic-pulse-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .dynamic-pulse-btn:hover::before {
            width: 300px;
            height: 300px;
        }
        
        /* ç¦ç”¨çŠ¶æ€çš„æŒ‰é’® */
        .dynamic-pulse-btn:disabled {
            background: linear-gradient(135deg, #cccccc, #999999);
            cursor: not-allowed;
            opacity: 0.7;
            transform: none !important;
            box-shadow: none !important;
        }
        
        .dynamic-pulse-btn:disabled::before {
            display: none;
        }
        
        /* åˆ†æç»“æœåŒºåŸŸ */
        .analysis-result-section {
            display: none;
            margin: 40px 0;
            padding: 0 15px;
        }
        
        .result-container {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .result-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light-color);
        }
        
        .result-header h3 {
            color: var(--primary-color);
            font-size: 24px;
            margin-bottom: 8px;
        }
        
        .result-content {
            margin: 25px 0;
        }
        
        /* å¡ç‰‡æ ·å¼ */
        .predictor-info-card,
        .bazi-pan-card,
        .dayun-pan-card,
        .free-content,
        .locked-content {
            background: #fff;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border: 1px solid var(--border-color);
        }
        
        .predictor-info-card h4,
        .bazi-pan-card h4,
        .dayun-pan-card h4,
        .free-content h4,
        .locked-content h4 {
            color: var(--primary-color);
            font-size: 18px;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--light-color);
        }
        
        /* é¢„æµ‹è€…ä¿¡æ¯ç½‘æ ¼ */
        .predictor-info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .predictor-info-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px dashed var(--border-color);
        }
        
        .predictor-info-label {
            color: #666;
            font-weight: 500;
            font-size: 14px;
        }
        
        .predictor-info-value {
            color: var(--dark-color);
            font-weight: 600;
            font-size: 14px;
            text-align: right;
        }
        
        /* å…«å­—æ’ç›˜ */
        .bazi-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }
        
        .bazi-column {
            text-align: center;
            padding: 15px;
            background: linear-gradient(135deg, #f9f5f0, #f0e6d6);
            border-radius: 8px;
            border: 2px solid var(--secondary-color);
        }
        
        .bazi-label {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .bazi-value {
            font-size: 20px;
            font-weight: bold;
            color: var(--dark-color);
            margin-bottom: 5px;
        }
        
        .bazi-element {
            color: #7d6e63;
            font-size: 12px;
        }
        
        /* å¤§è¿æ’ç›˜ - ä¼˜åŒ–ä¸ºè¡Œæ’åˆ— */
        .dayun-pan-card {
            display: none; /* åˆ é™¤å¤§è¿æ’ç›˜ç»“æœæ  */
        }
        
        .dayun-rows-container {
            margin-top: 15px;
        }
        
        .dayun-row {
            display: flex;
            background: #f8f9fa;
            margin-bottom: 8px;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }
        
        .dayun-row-header {
            display: flex;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
            font-weight: 600;
            border-radius: 8px 8px 0 0;
            margin-bottom: 8px;
        }
        
        .dayun-col {
            padding: 12px 10px;
            flex: 1;
            text-align: center;
            border-right: 1px solid var(--border-color);
        }
        
        .dayun-col:last-child {
            border-right: none;
        }
        
        .dayun-row-header .dayun-col {
            border-right: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .dayun-row-header .dayun-col:last-child {
            border-right: none;
        }
        
        /* å¤§è¿åŸºæœ¬ä¿¡æ¯ */
        .dayun-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .dayun-item {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 8px;
            border-left: 4px solid var(--secondary-color);
        }
        
        .dayun-label {
            color: #666;
            font-size: 12px;
            margin-bottom: 5px;
        }
        
        .dayun-value {
            color: var(--dark-color);
            font-weight: 600;
            font-size: 14px;
        }
        
        /* å…è´¹å†…å®¹åŒºåŸŸ */
        .analysis-section {
            margin-bottom: 20px;
        }
        
        .analysis-section h5 {
            color: var(--primary-color);
            font-size: 16px;
            margin-bottom: 8px;
            padding-left: 12px;
            border-left: 4px solid var(--secondary-color);
        }
        
        .analysis-content {
            line-height: 1.8;
            color: var(--text-color);
            padding: 8px 0;
            font-size: 14px;
        }
        
        /* é”å®šå†…å®¹åŒºåŸŸ - ä¼˜åŒ–æœªè§£é”é¡¹ç›®æ˜¾ç¤º */
        .locked-content {
            position: relative;
            background: linear-gradient(135deg, #fff, #f9f9f9);
            border: 2px solid rgba(212, 175, 55, 0.3);
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            min-height: 300px;
            overflow: visible;
        }
        
        .locked-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
            padding: 30px;
            border-radius: 10px;
            backdrop-filter: blur(2px);
            border: 1px solid rgba(212, 175, 55, 0.2);
        }
        
        .lock-icon {
            font-size: 50px;
            color: var(--secondary-color);
            margin-bottom: 15px;
            animation: pulse 2s infinite;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .unlock-btn {
            background: linear-gradient(135deg, var(--secondary-color), #e6b800);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
            max-width: 200px;
            box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
        }
        
        .unlock-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(212, 175, 55, 0.4);
        }
        
        /* æœªè§£é”é¡¹ç›®åˆ—è¡¨ - ä¼˜åŒ–æ˜¾ç¤ºæ•ˆæœ */
        .locked-items {
            margin: 20px 0;
            padding: 25px;
            border-radius: 12px;
            position: relative;
            z-index: 5;
            opacity: 1 !important;
            visibility: visible !important;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(249, 249, 249, 0.95));
            border: 2px solid rgba(212, 175, 55, 0.4);
            box-shadow: 0 5px 20px rgba(139, 69, 19, 0.1);
            backdrop-filter: blur(2px);
        }
        
        .locked-items h4 {
            color: var(--primary-color);
            font-size: 20px;
            margin-bottom: 20px;
            text-align: center;
            position: relative;
            font-weight: 700;
            text-shadow: 0 1px 2px rgba(255,255,255,0.8);
        }
        
        .locked-items h4::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 3px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            border-radius: 2px;
        }
        
        .locked-items ul {
            list-style: none;
            padding: 0;
            margin: 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 15px;
        }
        
        .locked-items li {
            padding: 16px 20px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 1), rgba(249, 249, 249, 1));
            border-radius: 10px;
            border-left: 5px solid var(--secondary-color);
            position: relative;
            padding-left: 50px;
            font-size: 15px;
            font-weight: 600;
            color: var(--dark-color);
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
            border: 1px solid rgba(212, 175, 55, 0.3);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
        }
        
        .locked-items li:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.12);
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(255, 255, 255, 1), rgba(245, 241, 232, 1));
        }
        
        .locked-items li::before {
            content: 'ğŸ”’';
            position: absolute;
            left: 15px;
            font-size: 20px;
            color: var(--secondary-color);
            filter: drop-shadow(0 1px 2px rgba(0,0,0,0.1));
        }
        
        /* å·²è§£é”é¡¹ç›®æ ·å¼ */
        .locked-items li.unlocked {
            border-left: 5px solid var(--success-color);
            background: linear-gradient(135deg, rgba(240, 255, 244, 1), rgba(232, 245, 233, 1));
        }
        
        .locked-items li.unlocked::before {
            content: 'âœ…';
            color: var(--success-color);
            font-size: 18px;
        }
        
        /* ç»“æœæ“ä½œæŒ‰é’® */
        .result-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid var(--light-color);
            flex-wrap: wrap;
        }
        
        /* ä¸‹è½½æŒ‰é’®é”å®šæ ·å¼ */
        .download-btn-locked {
            position: relative;
            overflow: hidden;
        }
        
        .download-btn-locked::before {
            content: 'ğŸ”’';
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 16px;
        }
        
        /* æ¨¡æ€æ¡† - ä¿®å¤æ‰‹æœºç«¯æ»šåŠ¨é—®é¢˜ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            backdrop-filter: blur(5px);
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 25px;
            border-radius: 15px;
            width: 95%;
            max-width: 500px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            position: relative;
            animation: modalAppear 0.3s ease-out;
            max-height: 90vh;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        @keyframes modalAppear {
            from {
                opacity: 0;
                transform: translateY(-30px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .close {
            position: absolute;
            right: 20px;
            top: 15px;
            color: #aaa;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s;
            z-index: 10;
        }
        
        .close:hover {
            color: var(--primary-color);
        }
        
        /* æ”¯ä»˜å¼¹çª— - ä¼˜åŒ–æ‰‹æœºç«¯æ˜¾ç¤º */
        .order-info {
            background: #f9f5f0;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        .order-info p {
            margin: 8px 0;
            display: flex;
            justify-content: space-between;
        }
        
        .qr-codes {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .qr-code {
            text-align: center;
            flex: 1;
            min-width: 150px;
        }
        
        .qr-code img {
            width: 100%;
            max-width: 150px;
            height: auto;
            aspect-ratio: 1/1;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 8px;
            background: white;
            margin-bottom: 8px;
        }
        
        .qr-code p {
            font-weight: 600;
            color: var(--primary-color);
            font-size: 14px;
        }
        
        /* åŠ è½½å¼¹çª— */
        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(212, 175, 55, 0.2);
            border-radius: 50%;
            border-top-color: var(--secondary-color);
            animation: spin 1s ease-in-out infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .loading-text {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 12px;
        }
        
        /* APIçŠ¶æ€æŒ‡ç¤ºå™¨ */
        .api-status {
            position: fixed;
            top: 10px;
            right: 10px;
            z-index: 1002;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
            display: none;
        }
        
        .api-status.online {
            background-color: var(--success-color);
            color: white;
            display: block;
        }
        
        .api-status.offline {
            background-color: var(--error-color);
            color: white;
            display: block;
        }
        
        /* å“åº”å¼è®¾è®¡ - ä¼˜åŒ–å›¾ç‰‡æ˜¾ç¤º */
        @media (max-width: 768px) {
            .service-nav {
                gap: 8px;
            }
            
            .service-nav a {
                padding: 5px 12px;
                font-size: 12px;
            }
            
            .hero-section, .detail-section {
                height: 40vh;
                min-height: 250px;
            }
            
            /* ç§»åŠ¨ç«¯å›¾ç‰‡ä¼˜åŒ– */
            .hero-image, .detail-image {
                object-fit: cover;
                object-position: top center;
            }
            
            .info-section {
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .form-row {
                flex-direction: column;
                gap: 10px;
            }
            
            .form-row .form-group {
                min-width: 100%;
            }
            
            .birth-time-group {
                padding: 12px;
            }
            
            .result-actions {
                flex-direction: column;
                align-items: center;
            }
            
            .qr-codes {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }
            
            .qr-code {
                min-width: 100%;
                max-width: 200px;
            }
            
            .result-container {
                padding: 20px;
            }
            
            /* æ”¯ä»˜å¼¹çª—ç§»åŠ¨ç«¯ä¼˜åŒ– */
            .modal-content {
                padding: 20px 15px;
                margin: 10% auto;
                max-height: 85vh;
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
            }
            
            .order-info {
                padding: 12px;
                font-size: 13px;
            }
            
            .order-info p {
                flex-direction: column;
                gap: 5px;
            }
            
            /* ç§»åŠ¨ç«¯å­—ä½“è°ƒæ•´ */
            .section-title h2 {
                font-size: 18px;
            }
            
            .predictor-info-card h4,
            .bazi-pan-card h4,
            .dayun-pan-card h4,
            .free-content h4,
            .locked-content h4 {
                font-size: 16px;
            }
            
            .bazi-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }
            
            .bazi-column {
                padding: 10px;
            }
            
            .bazi-value {
                font-size: 18px;
            }
            
            /* ç§»åŠ¨ç«¯é”å®šé¡¹ç›®ä¼˜åŒ– */
            .locked-items {
                padding: 20px 15px;
                margin: 15px 0;
            }
            
            .locked-items h4 {
                font-size: 18px;
            }
            
            .locked-items ul {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .locked-items li {
                padding: 14px 15px;
                padding-left: 45px;
                font-size: 14px;
            }
            
            .locked-items li::before {
                left: 12px;
                font-size: 18px;
            }
            
            .locked-overlay {
                padding: 20px 15px;
                background: rgba(255, 255, 255, 0.95);
            }
            
            /* ä¼˜åŒ–æŒ‰é’®å¤§å° */
            .dynamic-pulse-btn {
                max-width: 220px;
                padding: 12px 20px;
                font-size: 14px;
            }
        }
        
        @media (max-width: 480px) {
            .bazi-grid {
                grid-template-columns: 1fr;
            }
            
            .predictor-info-grid {
                grid-template-columns: 1fr;
            }
            
            .hero-section, .detail-section {
                height: 35vh;
                min-height: 200px;
            }
            
            /* å°å±å¹•å›¾ç‰‡ä¼˜åŒ– */
            .hero-image, .detail-image {
                object-fit: cover;
                object-position: center center;
            }
            
            .locked-items {
                padding: 18px 12px;
            }
            
            .locked-items h4 {
                font-size: 16px;
            }
            
            .locked-items li {
                font-size: 13px;
                padding: 12px 12px;
                padding-left: 40px;
            }
            
            /* å°å±å¹•æ”¯ä»˜å¼¹çª—ä¼˜åŒ– */
            .modal-content {
                padding: 15px 12px;
                margin: 5% auto;
                max-height: 90vh;
            }
            
            .qr-codes {
                gap: 10px;
            }
            
            .qr-code img {
                max-width: 130px;
            }
        }
        
        /* æ¡Œé¢ç«¯å›¾ç‰‡ä¼˜åŒ– */
        @media (min-width: 769px) {
            .hero-section {
                height: 55vh;
                min-height: 400px;
                max-height: 600px;
            }
            
            .detail-section {
                height: 55vh;
                min-height: 400px;
                max-height: 600px;
            }
            
            /* æ¡Œé¢ç«¯å›¾ç‰‡æ˜¾ç¤ºä¼˜åŒ– */
            .hero-image, .detail-image {
                object-fit: cover;
                object-position: center center;
            }
            
            /* æ¡Œé¢ç«¯é”å®šé¡¹ç›®ç½‘æ ¼ä¼˜åŒ– */
            .locked-items ul {
                grid-template-columns: repeat(2, 1fr);
            }
            
            /* æ¡Œé¢ç«¯æ”¯ä»˜å¼¹çª—ä¼˜åŒ– */
            .modal-content {
                max-height: 80vh;
            }
        }
        
        /* å¤§å±å¹•ä¼˜åŒ– */
        @media (min-width: 1200px) {
            .hero-section {
                height: 60vh;
                min-height: 500px;
                max-height: 700px;
            }
            
            .detail-section {
                height: 60vh;
                min-height: 500px;
                max-height: 700px;
            }
            
            .locked-items ul {
                grid-template-columns: repeat(3, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- APIçŠ¶æ€æŒ‡ç¤ºå™¨ -->
    <div id="api-status" class="api-status">APIçŠ¶æ€</div>
    
    <!-- å…è´£å£°æ˜æ»šåŠ¨æ¡ -->
    <div class="disclaimer-bar">
        <div class="disclaimer-wrapper">
            <div class="disclaimer-content">
                <strong>é‡è¦å£°æ˜ï¼š</strong>æœ¬å¹³å°æä¾›çš„å‘½ç†åˆ†ææœåŠ¡ä»…ä¾›å¨±ä¹å‚è€ƒï¼Œä¸æ„æˆä»»ä½•å®é™…çš„äººç”Ÿå»ºè®®æˆ–å†³ç­–ä¾æ®ã€‚å‘½è¿æŒæ¡åœ¨è‡ªå·±æ‰‹ä¸­ï¼Œè¯·ç†æ€§å¯¹å¾…åˆ†æç»“æœï¼Œåˆ‡å‹¿è¿·ä¿¡ã€‚æœ¬æœåŠ¡åŸºäºä¼ ç»Ÿå‘½ç†å­¦è¯´ï¼Œåˆ†æç»“æœä»…ä¾›å‚è€ƒã€‚
            </div>
        </div>
    </div>

    <!-- å¯¼èˆªæ  -->
    <header>
        <ul class="service-nav">
            <li><a href="#" class="active" onclick="switchService('æµ‹ç®—éªŒè¯')">æµ‹ç®—éªŒè¯</a></li>
            <li><a href="#" onclick="switchService('æµå¹´è¿ç¨‹')">æµå¹´è¿ç¨‹</a></li>
            <li><a href="#" onclick="switchService('äººç”Ÿè¯¦æ‰¹')">äººç”Ÿè¯¦æ‰¹</a></li>
            <li><a href="#" onclick="switchService('å…«å­—åˆå©š')">å…«å­—åˆå©š</a></li>
        </ul>
    </header>

    <!-- æ— ç¼é•¿å›¾å®¹å™¨ -->
    <div class="seamless-container">
        <!-- è‹±é›„å›¾éƒ¨åˆ† -->
        <section class="seamless-section hero-section">
            <div class="image-placeholder">æ­£åœ¨åŠ è½½å›¾ç‰‡...</div>
            <img id="hero-image" src="https://runzang-1388534671.cos.ap-guangzhou.myqcloud.com/images/1-1.jpg" alt="æµ‹ç®—éªŒè¯è‹±é›„åŒº" class="hero-image" onload="this.classList.add('loaded'); this.previousElementSibling.style.display='none';">
        </section>

        <!-- ä¿¡æ¯å¡«å†™åŒºåŸŸ -->
        <section class="seamless-section info-section">
            <div class="section-title">
                <h2 id="form-title">æµ‹ç®—éªŒè¯ä¿¡æ¯å¡«å†™</h2>
                <p>è¯·å¡«å†™æ‚¨çš„ä¸ªäººä¿¡æ¯ï¼Œæˆ‘ä»¬å°†ä¸ºæ‚¨è¿›è¡Œä¸“ä¸šå‘½ç†åˆ†æ</p>
            </div>
            
            <div class="form-container">
                <div class="form-grid">
                    <!-- å§“å -->
                    <div class="form-group">
                        <label for="name" class="required">å§“å</label>
                        <input type="text" id="name" placeholder="è¯·è¾“å…¥æ‚¨çš„å§“å">
                        <div class="error" id="name-error">è¯·è¾“å…¥å§“å</div>
                    </div>
                    
                    <!-- æ€§åˆ« -->
                    <div class="form-group">
                        <label for="gender" class="required">æ€§åˆ«</label>
                        <select id="gender">
                            <option value="">è¯·é€‰æ‹©æ€§åˆ«</option>
                            <option value="male">ç”·</option>
                            <option value="female">å¥³</option>
                        </select>
                        <div class="error" id="gender-error">è¯·é€‰æ‹©æ€§åˆ«</div>
                    </div>
                    
                    <!-- å‡ºç”ŸåŸå¸‚ -->
                    <div class="form-group">
                        <label for="birth-city" class="required">å‡ºç”ŸåŸå¸‚</label>
                        <input type="text" id="birth-city" placeholder="è¯·è¾“å…¥å‡ºç”ŸåŸå¸‚">
                        <div class="error" id="birth-city-error">è¯·è¾“å…¥å‡ºç”ŸåŸå¸‚</div>
                    </div>
                </div>
                
                <!-- å‡ºç”Ÿæ—¶é—´ç»„ -->
                <div class="birth-time-group">
                    <label class="required">å‡ºç”Ÿæ—¶é—´</label>
                    <div class="form-row">
                        <div class="form-group">
                            <select id="birth-year">
                                <option value="">å‡ºç”Ÿå¹´ä»½</option>
                            </select>
                            <div class="error" id="birth-year-error">è¯·é€‰æ‹©å‡ºç”Ÿå¹´ä»½</div>
                        </div>
                        <div class="form-group">
                            <select id="birth-month">
                                <option value="">å‡ºç”Ÿæœˆä»½</option>
                            </select>
                            <div class="error" id="birth-month-error">è¯·é€‰æ‹©å‡ºç”Ÿæœˆä»½</div>
                        </div>
                        <div class="form-group">
                            <select id="birth-day">
                                <option value="">å‡ºç”Ÿæ—¥æœŸ</option>
                            </select>
                            <div class="error" id="birth-day-error">è¯·é€‰æ‹©å‡ºç”Ÿæ—¥æœŸ</div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <select id="birth-hour">
                                <option value="">å‡ºç”Ÿæ—¶è¾°</option>
                            </select>
                            <div class="error" id="birth-hour-error">è¯·é€‰æ‹©å‡ºç”Ÿæ—¶è¾°</div>
                        </div>
                        <div class="form-group">
                            <select id="birth-minute">
                                <option value="">å‡ºç”Ÿåˆ†é’Ÿ</option>
                            </select>
                            <div class="error" id="birth-minute-error">è¯·é€‰æ‹©å‡ºç”Ÿåˆ†é’Ÿ</div>
                        </div>
                    </div>
                </div>
                
                <!-- ä¼´ä¾£ä¿¡æ¯åŒºåŸŸ (å…«å­—åˆå©šæ—¶æ˜¾ç¤º) -->
                <div id="partner-info-section" class="partner-info-section" style="display: none;">
                    <h3>ä¼´ä¾£ä¿¡æ¯</h3>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="partner-name" class="required">ä¼´ä¾£å§“å</label>
                            <input type="text" id="partner-name" placeholder="è¯·è¾“å…¥ä¼´ä¾£å§“å">
                            <div class="error" id="partner-name-error">è¯·è¾“å…¥ä¼´ä¾£å§“å</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="partner-gender" class="required">ä¼´ä¾£æ€§åˆ«</label>
                            <select id="partner-gender">
                                <option value="">è¯·é€‰æ‹©æ€§åˆ«</option>
                                <option value="male">ç”·</option>
                                <option value="female">å¥³</option>
                            </select>
                            <div class="error" id="partner-gender-error">è¯·é€‰æ‹©ä¼´ä¾£æ€§åˆ«</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="partner-birth-city" class="required">ä¼´ä¾£å‡ºç”ŸåŸå¸‚</label>
                            <input type="text" id="partner-birth-city" placeholder="è¯·è¾“å…¥ä¼´ä¾£å‡ºç”ŸåŸå¸‚">
                            <div class="error" id="partner-birth-city-error">è¯·è¾“å…¥ä¼´ä¾£å‡ºç”ŸåŸå¸‚</div>
                        </div>
                    </div>
                    
                    <div class="birth-time-group">
                        <label class="required">ä¼´ä¾£å‡ºç”Ÿæ—¶é—´</label>
                        <div class="form-row">
                            <div class="form-group">
                                <select id="partner-birth-year">
                                    <option value="">å‡ºç”Ÿå¹´ä»½</option>
                                </select>
                                <div class="error" id="partner-birth-year-error">è¯·é€‰æ‹©ä¼´ä¾£å‡ºç”Ÿå¹´ä»½</div>
                            </div>
                            <div class="form-group">
                                <select id="partner-birth-month">
                                    <option value="">å‡ºç”Ÿæœˆä»½</option>
                                </select>
                                <div class="error" id="partner-birth-month-error">è¯·é€‰æ‹©ä¼´ä¾£å‡ºç”Ÿæœˆä»½</div>
                            </div>
                            <div class="form-group">
                                <select id="partner-birth-day">
                                    <option value="">å‡ºç”Ÿæ—¥æœŸ</option>
                                </select>
                                <div class="error" id="partner-birth-day-error">è¯·é€‰æ‹©ä¼´ä¾£å‡ºç”Ÿæ—¥æœŸ</div>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <select id="partner-birth-hour">
                                    <option value="">å‡ºç”Ÿæ—¶è¾°</option>
                                </select>
                                <div class="error" id="partner-birth-hour-error">è¯·é€‰æ‹©ä¼´ä¾£å‡ºç”Ÿæ—¶è¾°</div>
                            </div>
                            <div class="form-group">
                                <select id="partner-birth-minute">
                                    <option value="">å‡ºç”Ÿåˆ†é’Ÿ</option>
                                </select>
                                <div class="error" id="partner-birth-minute-error">è¯·é€‰æ‹©ä¼´ä¾£å‡ºç”Ÿåˆ†é’Ÿ</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ç«‹å³æµ‹ç®—æŒ‰é’® -->
                <button id="analyze-btn" class="dynamic-pulse-btn" onclick="startAnalysis()">
                    <span id="btn-text">ç«‹å³æµ‹ç®—</span>
                </button>
            </div>
        </section>

        <!-- æ˜ç»†å›¾éƒ¨åˆ† -->
        <section class="seamless-section detail-section">
            <div class="image-placeholder">æ­£åœ¨åŠ è½½å›¾ç‰‡...</div>
            <img id="detail-image" src="https://runzang-1388534671.cos.ap-guangzhou.myqcloud.com/images/1-2.jpg" alt="æµ‹ç®—éªŒè¯æœåŠ¡æ˜ç»†" class="detail-image" onload="this.classList.add('loaded'); this.previousElementSibling.style.display='none';">
        </section>
    </div>

    <!-- åˆ†æç»“æœåŒºåŸŸ -->
    <section id="analysis-result-section" class="analysis-result-section">
        <div class="result-container">
            <div class="section-title">
                <h2>å‘½ç†åˆ†ææŠ¥å‘Š</h2>
                <p>åŸºäºæ‚¨çš„å‡ºç”Ÿä¿¡æ¯è¿›è¡Œçš„ä¸“ä¸šå‘½ç†åˆ†æ</p>
            </div>
            
            <div class="result-header">
                <h3 id="result-service-name">æµ‹ç®—éªŒè¯åˆ†ææŠ¥å‘Š</h3>
                <p>åˆ†ææ—¶é—´: <span id="analysis-time"></span></p>
            </div>
            
            <div class="result-content">
                <!-- é¢„æµ‹è€…ä¿¡æ¯ -->
                <div class="predictor-info-card" id="predictor-info">
                    <h4>é¢„æµ‹è€…ä¿¡æ¯</h4>
                    <div class="predictor-info-grid" id="predictor-info-grid">
                        <!-- è¿™é‡Œå°†é€šè¿‡JavaScriptåŠ¨æ€å¡«å…… -->
                    </div>
                </div>
                
                <!-- å…«å­—æ’ç›˜ç»“æœ -->
                <div class="bazi-pan-card" id="bazi-pan">
                    <h4>å…«å­—æ’ç›˜ç»“æœ</h4>
                    <div class="bazi-grid" id="bazi-grid">
                        <!-- è¿™é‡Œå°†é€šè¿‡JavaScriptåŠ¨æ€å¡«å…… -->
                    </div>
                </div>
                
                <!-- å…è´¹å†…å®¹åŒºåŸŸ -->
                <div class="free-content" id="free-content">
                    <h4>å…è´¹åˆ†æå†…å®¹</h4>
                    <div id="free-analysis-text">
                        <!-- è¿™é‡Œå°†é€šè¿‡JavaScriptåŠ¨æ€å¡«å……å…è´¹å†…å®¹ -->
                    </div>
                </div>
                
                <!-- é”å®šå†…å®¹åŒºåŸŸ -->
                <div class="locked-content" id="locked-content">
                    <div class="locked-overlay" id="locked-overlay">
                        <div class="lock-icon">ğŸ”’</div>
                        <p style="text-align: center; font-weight: bold; color: var(--primary-color); margin-bottom: 10px; font-size: 16px;">
                            å®Œæ•´å†…å®¹å·²é”å®š
                        </p>
                        <p style="text-align: center; color: var(--text-color); margin-bottom: 15px; font-size: 14px;">
                            è§£é”å®Œæ•´åˆ†ææŠ¥å‘Šï¼ŒæŸ¥çœ‹å…¨éƒ¨å‘½ç†åˆ†æå†…å®¹
                        </p>
                        <button class="unlock-btn" onclick="showPaymentModal()">è§£é”å®Œæ•´æŠ¥å‘Š (Â¥<span id="unlock-price">19.9</span>)</button>
                    </div>
                    
                    <div class="locked-items">
                        <h4>å¾…è§£é”åˆ†æé¡¹ç›®</h4>
                        <ul id="locked-items-list">
                            <!-- è¿™é‡Œå°†é€šè¿‡JavaScriptåŠ¨æ€å¡«å…… -->
                        </ul>
                    </div>
                    
                    <div id="locked-analysis-text" style="display: none;">
                        <!-- è¿™é‡Œå°†é€šè¿‡JavaScriptåŠ¨æ€å¡«å……å®Œæ•´å†…å®¹ -->
                    </div>
                </div>
            </div>
            
            <div class="result-actions">
                <!-- ä¸‹è½½æŠ¥å‘ŠæŒ‰é’® - åˆå§‹ä¸ºé”å®šçŠ¶æ€ -->
                <button id="download-report-btn" class="dynamic-pulse-btn download-btn-locked" style="max-width: 200px;" onclick="downloadReport()" disabled>
                    <span id="download-btn-text">ä¸‹è½½æŠ¥å‘Š</span>
                </button>
                <button class="dynamic-pulse-btn" style="max-width: 200px; background: linear-gradient(135deg, #5c3d2e, #7d6e63);" onclick="newAnalysis()"><span>é‡æ–°æµ‹ç®—</span></button>
            </div>
        </div>
    </section>

    <!-- æ”¯ä»˜å¼¹çª— -->
    <div id="payment-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closePaymentModal()">&times;</span>
            <h3 style="color: var(--primary-color); text-align: center; margin-bottom: 15px; font-size: 18px;">è§£é”å®Œæ•´æŠ¥å‘Š</h3>
            
            <div class="order-info">
                <p><strong>æœåŠ¡ç±»å‹:</strong> <span id="payment-service-type" style="color: var(--primary-color); font-weight: 600;"></span></p>
                <p><strong>è§£é”é‡‘é¢:</strong> <span id="payment-amount" style="color: var(--secondary-color); font-weight: bold; font-size: 16px;"></span></p>
                <p><strong>è®¢å•å·:</strong> <span id="payment-order-id" style="color: #7d6e63;"></span></p>
            </div>
            
            <div style="text-align: center; margin: 15px 0; padding: 12px; background-color: rgba(212, 175, 55, 0.1); border-radius: 8px; font-size: 14px;">
                <p>âœ… è¯·æ‰«æä¸‹æ–¹äºŒç»´ç å®Œæˆæ”¯ä»˜</p>
            </div>
            
            <div class="qr-codes">
                <div class="qr-code">
                    <img id="wechat-qr" src="https://via.placeholder.com/150x150/4CAF50/FFFFFF?text=å¾®ä¿¡æ”¯ä»˜" alt="å¾®ä¿¡æ”¯ä»˜ç ">
                    <p>å¾®ä¿¡æ”¯ä»˜</p>
                </div>
                <div class="qr-code">
                    <img id="alipay-qr" src="https://via.placeholder.com/150x150/1677FF/FFFFFF?text=æ”¯ä»˜å®" alt="æ”¯ä»˜å®æ”¯ä»˜ç ">
                    <p>æ”¯ä»˜å®</p>
                </div>
            </div>
            
            <div style="text-align: center; margin: 15px 0; padding: 12px; background-color: #f8f9fa; border-radius: 8px; border-left: 4px solid var(--secondary-color); font-size: 14px;">
                <p id="payment-status-text">è¯·ä½¿ç”¨å¾®ä¿¡æˆ–æ”¯ä»˜å®æ‰«æä¸Šæ–¹äºŒç»´ç å®Œæˆæ”¯ä»˜</p>
                <p style="font-size: 13px; color: #7d6e63; margin-top: 8px;">æ”¯ä»˜å®Œæˆåè¯·ç‚¹å‡»"æˆ‘å·²æ”¯ä»˜"æŒ‰é’®</p>
            </div>
            
            <div style="display: flex; gap: 12px; justify-content: center; margin-top: 20px; flex-wrap: wrap;">
                <button class="dynamic-pulse-btn" style="max-width: 150px; padding: 10px 20px; font-size: 14px;" onclick="confirmPayment()"><span>æˆ‘å·²æ”¯ä»˜</span></button>
                <button class="dynamic-pulse-btn" style="max-width: 150px; padding: 10px 20px; font-size: 14px; background: linear-gradient(135deg, #5c3d2e, #7d6e63);" onclick="closePaymentModal()"><span>å–æ¶ˆ</span></button>
            </div>
        </div>
    </div>

    <!-- åŠ è½½å¼¹çª— -->
    <div id="loading-modal" class="modal">
        <div class="modal-content" style="text-align: center; padding: 40px 25px;">
            <div class="spinner"></div>
            <div class="loading-text">æ¶¦è—å…«å­—å›¢é˜Ÿæ­£åœ¨ä¸ºæ‚¨è¿›è¡Œæ·±åº¦å‘½ç†åˆ†æï¼Œè¯·ç¨å€™...</div>
            <p style="color: #7d6e63; margin-top: 15px; font-size: 14px;">å¤§çº¦éœ€è¦3åˆ†é’Ÿï¼Œä¸è¦å…³é—­</p>
        </div>
    </div>

    <script>
        // DeepSeek APIé…ç½® - ä½¿ç”¨çœŸå®å¯†é’¥
        const DEEPSEEK_API_KEY = 'sk-0c763bf4e169413dbd57a45e8ca73a6a';
        const DEEPSEEK_API_URL = 'https://api.deepseek.com/v1/chat/completions';
        
        // æœåŠ¡é…ç½®
        const SERVICES = {
            'æµ‹ç®—éªŒè¯': {
                heroImage: 'https://runzang-1388534671.cos.ap-guangzhou.myqcloud.com/images/1-1.jpg',
                detailImage: 'https://runzang-1388534671.cos.ap-guangzhou.myqcloud.com/images/1-2.jpg',
                price: 19.9,
                lockedItems: [
                    'å¯Œè´µå±‚æ¬¡è¯„ä¼°',
                    'è¿‡å¾€å¤§è¿è¥å‡¶åˆ†æ',
                    'è¿‡å¾€å…³é”®æµå¹´éªŒè¯', 
                    'ä¸“ä¸šå»ºè®®ä¸æŒ‡å¯¼'
                ],
                prompt: `ä½ æ˜¯ä¸€ä½èŒä¸šçš„å‘½ç†å¤§å¸ˆï¼Œç²¾é€šæ¢æ¹˜æ¶¦è®ºå‘½ä½“ç³»ã€‚è¯·æ ¹æ®ä»¥ä¸‹ç”¨æˆ·ä¿¡æ¯ç”¨çœŸå¤ªé˜³æ—¶æ’ç›˜å…«å­—è¿›è¡Œå‘½ç†åˆ†æï¼š

ç”¨æˆ·ä¿¡æ¯ï¼š
å§“åï¼š{name}
æ€§åˆ«ï¼š{gender}
å‡ºç”Ÿæ—¶é—´ï¼š{birthYear}å¹´{birthMonth}æœˆ{birthDay}æ—¥{birthHour}æ—¶{birthMinute}åˆ†
å‡ºç”ŸåŸå¸‚ï¼š{birthCity}

è¯·å…ˆè¿›è¡Œå…«å­—æ’ç›˜ï¼Œç„¶åç”¨ä»¥ä¸‹æ ¼å¼è¾“å‡ºç»“æœï¼š

ã€å…«å­—æ’ç›˜ã€‘
å¹´æŸ±ï¼š[å¹´æŸ±å¹²æ”¯] ([äº”è¡Œå±æ€§])
æœˆæŸ±ï¼š[æœˆæŸ±å¹²æ”¯] ([äº”è¡Œå±æ€§])
æ—¥æŸ±ï¼š[æ—¥æŸ±å¹²æ”¯] ([äº”è¡Œå±æ€§])
æ—¶æŸ±ï¼š[æ—¶æŸ±å¹²æ”¯] ([äº”è¡Œå±æ€§])

ã€å¤§è¿æ’ç›˜ã€‘
èµ·è¿å²æ•°ï¼š[èµ·è¿å²æ•°]
èµ·è¿æ—¶é—´ï¼š[èµ·è¿æ—¶é—´]
å¤§è¿è¯¦ç»†ï¼š
ç¬¬1æ­¥å¤§è¿ï¼š[å¹²æ”¯] ([å¹´é¾„æ®µ]ï¼Œ[å¹´ä»½æ®µ])
ç¬¬2æ­¥å¤§è¿ï¼š[å¹²æ”¯] ([å¹´é¾„æ®µ]ï¼Œ[å¹´ä»½æ®µ])
...ç»§ç»­åˆ—å‡ºåç»­å¤§è¿...

ã€å…«å­—å–œç”¨åˆ†æã€‘
ç”¨ç©·é€šå®é‰´ã€å­å¹³çœŸè¯ ã€ä¸‰åé€šä¼šå…­åç”²å­æ—¥æ—¶æ–­æ·±å…¥åˆ†æå…«å­—å–œç”¨ã€‚

ã€æ€§æ ¼ç‰¹ç‚¹ã€‘
è¯¦ç»†è§£è¯»ç”¨æˆ·æ€§æ ¼ç‰¹ç‚¹ï¼ŒåŒ…æ‹¬ä¼˜ç‚¹ã€ç¼ºç‚¹å’Œä¸ªæ€§å€¾å‘ã€‚

ã€é€‚å®œè¡Œä¸šèŒä¸šæ¨èã€‘
æ ¹æ®å…«å­—å–œç”¨å’Œäº”è¡Œå±æ€§ï¼Œæ¨èé€‚åˆçš„è¡Œä¸šå’ŒèŒä¸šå‘å±•æ–¹å‘ã€‚

ã€å¯Œè´µå±‚æ¬¡è¯„ä¼°ã€‘
è¯„ä¼°ç”¨æˆ·çš„å¯Œè´µå±‚æ¬¡ï¼ŒåŒ…æ‹¬è´¢å¯Œã€äº‹ä¸šå’Œç¤¾ä¼šåœ°ä½ç­‰æ–¹é¢çš„æ½œåŠ›ã€‚

ã€è¿‡å¾€å¤§è¿è¥å‡¶åˆ†æã€‘
åˆ†æç”¨æˆ·è¿‡å¾€å¤§è¿çš„å‰å‡¶æƒ…å†µï¼ŒæŒ‡å‡ºå…³é”®æ—¶æœŸå’Œè½¬æŠ˜ç‚¹ã€‚

ã€è¿‡å¾€å…³é”®æµå¹´éªŒè¯ã€‘
éªŒè¯ç”¨æˆ·è¿‡å¾€å…³é”®æµå¹´çš„è¿åŠ¿ï¼Œä¸å®é™…ç»å†è¿›è¡Œå¯¹ç…§åˆ†æã€‚

ã€ä¸“ä¸šå»ºè®®ä¸æŒ‡å¯¼ã€‘
æä¾›ä¸“ä¸šçš„å‘½ç†å»ºè®®å’Œå‘å±•æŒ‡å¯¼ï¼Œå¸®åŠ©ç”¨æˆ·æŠŠæ¡æœªæ¥æœºé‡ã€‚

è¦æ±‚ï¼š
1. å›å¤å­—æ•°æ§åˆ¶åœ¨2800-3000å­—ä¹‹é—´
2. ä½¿ç”¨çº¯æ–‡æœ¬æ ¼å¼ï¼Œä¸è¦ä½¿ç”¨ä»»ä½•markdownç¬¦å·
3. å›å¤å†…å®¹è¦ä¸“ä¸šã€è¯¦ç»†ä½†æ˜“æ‡‚
4. åˆ†æè¦ç›´æ¥æ˜äº†ï¼Œä¸è¦æœ‰"é¦–å…ˆ"ã€"ç„¶å"ç­‰è¿‡ç¨‹æ€§è¯è¯­
5. ä¸¥æ ¼æŒ‰ç…§ä¸Šè¿°æ ¼å¼è¾“å‡ºï¼Œæ¯ä¸ªéƒ¨åˆ†ä»¥ã€æ ‡é¢˜ã€‘å¼€å¤´`
            },
            'æµå¹´è¿ç¨‹': {
                heroImage: 'https://runzang-1388534671.cos.ap-guangzhou.myqcloud.com/images/2-1.jpg',
                detailImage: 'https://runzang-1388534671.cos.ap-guangzhou.myqcloud.com/images/2-2.jpg',
                price: 38,
                lockedItems: [
                    'å¯Œè´µå±‚æ¬¡è¯„ä¼°',
                    'æµ‹ç®—å½“å¹´åŠå¾€å5å¹´è¿åŠ¿',
                    'äº‹ä¸šè´¢è¿èµ°å‘åˆ†æ',
                    'å©šå§»æ„Ÿæƒ…è¶‹åŠ¿åˆ†æ',
                    'å¹´åº¦å‘å±•å»ºè®®',
                    'é‡è¦æ³¨æ„äº‹é¡¹'
                ],
                prompt: `ä½ æ˜¯ä¸€ä½èŒä¸šçš„å‘½ç†å¤§å¸ˆï¼Œç²¾é€šæ¢æ¹˜æ¶¦è®ºå‘½ä½“ç³»ã€‚è¯·æ ¹æ®ä»¥ä¸‹ç”¨æˆ·ä¿¡æ¯ç”¨çœŸå¤ªé˜³æ—¶æ’ç›˜å…«å­—è¿›è¡Œå‘½ç†åˆ†æï¼š

ç”¨æˆ·ä¿¡æ¯ï¼š
å§“åï¼š{name}
æ€§åˆ«ï¼š{gender}
å‡ºç”Ÿæ—¶é—´ï¼š{birthYear}å¹´{birthMonth}æœˆ{birthDay}æ—¥{birthHour}æ—¶{birthMinute}åˆ†
å‡ºç”ŸåŸå¸‚ï¼š{birthCity}

è¯·å…ˆè¿›è¡Œå…«å­—æ’ç›˜ï¼Œç„¶åç”¨ä»¥ä¸‹æ ¼å¼è¾“å‡ºç»“æœï¼š

ã€å…«å­—æ’ç›˜ã€‘
å¹´æŸ±ï¼š[å¹´æŸ±å¹²æ”¯] ([äº”è¡Œå±æ€§])
æœˆæŸ±ï¼š[æœˆæŸ±å¹²æ”¯] ([äº”è¡Œå±æ€§])
æ—¥æŸ±ï¼š[æ—¥æŸ±å¹²æ”¯] ([äº”è¡Œå±æ€§])
æ—¶æŸ±ï¼š[æ—¶æŸ±å¹²æ”¯] ([äº”è¡Œå±æ€§])

ã€å¤§è¿æ’ç›˜ã€‘
èµ·è¿å²æ•°ï¼š[èµ·è¿å²æ•°]
èµ·è¿æ—¶é—´ï¼š[èµ·è¿æ—¶é—´]
å¤§è¿è¯¦ç»†ï¼š
ç¬¬1æ­¥å¤§è¿ï¼š[å¹²æ”¯] ([å¹´é¾„æ®µ]ï¼Œ[å¹´ä»½æ®µ])
ç¬¬2æ­¥å¤§è¿ï¼š[å¹²æ”¯] ([å¹´é¾„æ®µ]ï¼Œ[å¹´ä»½æ®µ])
...ç»§ç»­åˆ—å‡ºåç»­å¤§è¿...

ã€å…«å­—å–œç”¨åˆ†æã€‘
ç”¨ç©·é€šå®é‰´ã€å­å¹³çœŸè¯ ã€ä¸‰åé€šä¼šå…­åç”²å­æ—¥æ—¶æ–­æ·±å…¥åˆ†æå…«å­—å–œç”¨ã€‚

ã€æ€§æ ¼ç‰¹ç‚¹ã€‘
è¯¦ç»†è§£è¯»ç”¨æˆ·æ€§æ ¼ç‰¹ç‚¹ï¼ŒåŒ…æ‹¬ä¼˜ç‚¹ã€ç¼ºç‚¹å’Œä¸ªæ€§å€¾å‘ã€‚

ã€é€‚å®œè¡Œä¸šèŒä¸šæ¨èã€‘
æ ¹æ®å…«å­—å–œç”¨å’Œäº”è¡Œå±æ€§ï¼Œæ¨èé€‚åˆçš„è¡Œä¸šå’ŒèŒä¸šå‘å±•æ–¹å‘ã€‚

ã€å¯Œè´µå±‚æ¬¡è¯„ä¼°ã€‘
è¯„ä¼°ç”¨æˆ·çš„å¯Œè´µå±‚æ¬¡ï¼ŒåŒ…æ‹¬è´¢å¯Œã€äº‹ä¸šå’Œç¤¾ä¼šåœ°ä½ç­‰æ–¹é¢çš„æ½œåŠ›ã€‚

ã€æµ‹ç®—å½“å¹´åŠå¾€å5å¹´è¿åŠ¿ã€‘
è¯¦ç»†åˆ†æå½“å¹´åŠæœªæ¥5å¹´çš„è¿åŠ¿èµ°åŠ¿ï¼ŒæŒ‡å‡ºå‰å‡¶å¹´ä»½ã€‚

ã€äº‹ä¸šè´¢è¿èµ°å‘ã€‘
åˆ†æç”¨æˆ·äº‹ä¸šå’Œè´¢è¿çš„å‘å±•è¶‹åŠ¿ï¼ŒæŒ‡å‡ºå…³é”®æœºé‡å’ŒæŒ‘æˆ˜ã€‚

ã€å©šå§»æ„Ÿæƒ…è¶‹åŠ¿ã€‘
åˆ†æç”¨æˆ·å©šå§»å’Œæ„Ÿæƒ…çš„å‘å±•è¶‹åŠ¿ï¼ŒæŒ‡å‡ºå…³é”®æ—¶æœŸå’Œæ³¨æ„äº‹é¡¹ã€‚

ã€å¹´åº¦å‘å±•å»ºè®®ã€‘
æä¾›å½“å¹´çš„å…·ä½“å‘å±•å»ºè®®ï¼ŒåŒ…æ‹¬äº‹ä¸šã€è´¢è¿ã€å¥åº·ç­‰æ–¹é¢ã€‚

ã€é‡è¦æ³¨æ„äº‹é¡¹ã€‘
æé†’ç”¨æˆ·éœ€è¦æ³¨æ„çš„é‡è¦äº‹é¡¹å’Œé˜²èŒƒçš„é£é™©ã€‚

è¦æ±‚ï¼š
1. å›å¤å­—æ•°æ§åˆ¶åœ¨2800-3200å­—ä¹‹é—´
2. ä½¿ç”¨çº¯æ–‡æœ¬æ ¼å¼ï¼Œä¸è¦ä½¿ç”¨ä»»ä½•markdownç¬¦å·
3. å›å¤å†…å®¹è¦ä¸“ä¸šã€è¯¦ç»†ä½†æ˜“æ‡‚
4. åˆ†æè¦ç›´æ¥æ˜äº†ï¼Œä¸è¦æœ‰"é¦–å…ˆ"ã€"ç„¶å"ç­‰è¿‡ç¨‹æ€§è¯è¯­
5. ä¸¥æ ¼æŒ‰ç…§ä¸Šè¿°æ ¼å¼è¾“å‡ºï¼Œæ¯ä¸ªéƒ¨åˆ†ä»¥ã€æ ‡é¢˜ã€‘å¼€å¤´`
            },
            'äººç”Ÿè¯¦æ‰¹': {
                heroImage: 'https://runzang-1388534671.cos.ap-guangzhou.myqcloud.com/images/3-1.jpg',
                detailImage: 'https://runzang-1388534671.cos.ap-guangzhou.myqcloud.com/images/3-2.jpg',
                price: 68,
                lockedItems: [
                    'å¯Œè´µå±‚æ¬¡è¯„ä¼°',
                    'äººç”Ÿæ¯æ­¥å¤§è¿è¥å‡¶åˆ†æ',
                    'å¾€åå…³é”®æµå¹´åˆ†æ',
                    'é‡è¦äººç”Ÿäº‹é¡¹æé†’',
                    'é£æ°´å»ºè®®',
                    'ä¸ªäººå‘å±•å»ºè®®'
                ],
                prompt: `ä½ æ˜¯ä¸€ä½èŒä¸šçš„å‘½ç†å¤§å¸ˆï¼Œç²¾é€šæ¢æ¹˜æ¶¦è®ºå‘½ä½“ç³»ã€‚è¯·æ ¹æ®ä»¥ä¸‹ç”¨æˆ·ä¿¡æ¯ç”¨çœŸå¤ªé˜³æ—¶æ’ç›˜å…«å­—è¿›è¡Œå‘½ç†åˆ†æï¼š

ç”¨æˆ·ä¿¡æ¯ï¼š
å§“åï¼š{name}
æ€§åˆ«ï¼š{gender}
å‡ºç”Ÿæ—¶é—´ï¼š{birthYear}å¹´{birthMonth}æœˆ{birthDay}æ—¥{birthHour}æ—¶{birthMinute}åˆ†
å‡ºç”ŸåŸå¸‚ï¼š{birthCity}

è¯·å…ˆè¿›è¡Œå…«å­—æ’ç›˜ï¼Œç„¶åç”¨ä»¥ä¸‹æ ¼å¼è¾“å‡ºç»“æœï¼š

ã€å…«å­—æ’ç›˜ã€‘
å¹´æŸ±ï¼š[å¹´æŸ±å¹²æ”¯] ([äº”è¡Œå±æ€§])
æœˆæŸ±ï¼š[æœˆæŸ±å¹²æ”¯] ([äº”è¡Œå±æ€§])
æ—¥æŸ±ï¼š[æ—¥æŸ±å¹²æ”¯] ([äº”è¡Œå±æ€§])
æ—¶æŸ±ï¼š[æ—¶æŸ±å¹²æ”¯] ([äº”è¡Œå±æ€§])

ã€å¤§è¿æ’ç›˜ã€‘
èµ·è¿å²æ•°ï¼š[èµ·è¿å²æ•°]
èµ·è¿æ—¶é—´ï¼š[èµ·è¿æ—¶é—´]
å¤§è¿è¯¦ç»†ï¼š
ç¬¬1æ­¥å¤§è¿ï¼š[å¹²æ”¯] ([å¹´é¾„æ®µ]ï¼Œ[å¹´ä»½æ®µ])
ç¬¬2æ­¥å¤§è¿ï¼š[å¹²æ”¯] ([å¹´é¾„æ®µ]ï¼Œ[å¹´ä»½æ®µ])
...ç»§ç»­åˆ—å‡ºåç»­å¤§è¿...

ã€å…«å­—å–œç”¨åˆ†æã€‘
ç”¨ç©·é€šå®é‰´ã€å­å¹³çœŸè¯ ã€ä¸‰åé€šä¼šå…­åç”²å­æ—¥æ—¶æ–­æ·±å…¥åˆ†æå…«å­—å–œç”¨ã€‚

ã€æ€§æ ¼ç‰¹ç‚¹ã€‘
è¯¦ç»†è§£è¯»ç”¨æˆ·æ€§æ ¼ç‰¹ç‚¹ï¼ŒåŒ…æ‹¬ä¼˜ç‚¹ã€ç¼ºç‚¹å’Œä¸ªæ€§å€¾å‘ã€‚

ã€é€‚å®œè¡Œä¸šèŒä¸šæ¨èã€‘
æ ¹æ®å…«å­—å–œç”¨å’Œäº”è¡Œå±æ€§ï¼Œæ¨èé€‚åˆçš„è¡Œä¸šå’ŒèŒä¸šå‘å±•æ–¹å‘ã€‚

ã€å¯Œè´µå±‚æ¬¡è¯„ä¼°ã€‘
è¯„ä¼°ç”¨æˆ·çš„å¯Œè´µå±‚æ¬¡ï¼ŒåŒ…æ‹¬è´¢å¯Œã€äº‹ä¸šå’Œç¤¾ä¼šåœ°ä½ç­‰æ–¹é¢çš„æ½œåŠ›ã€‚

ã€äººç”Ÿæ¯æ­¥å¤§è¿è¥å‡¶åˆ†æã€‘
è¯¦ç»†åˆ†æç”¨æˆ·äººç”Ÿæ¯ä¸€æ­¥å¤§è¿çš„å‰å‡¶æƒ…å†µï¼ŒæŒ‡å‡ºå…³é”®æ—¶æœŸå’Œè½¬æŠ˜ç‚¹ã€‚

ã€å¾€åå…³é”®æµå¹´åˆ†æã€‘
åˆ†æç”¨æˆ·æœªæ¥å…³é”®æµå¹´çš„è¿åŠ¿ï¼ŒæŒ‡å‡ºé‡è¦å¹´ä»½å’Œæœºé‡æŒ‘æˆ˜ã€‚

ã€é‡è¦äººç”Ÿäº‹é¡¹æé†’ã€‘
æé†’ç”¨æˆ·äººç”Ÿä¸­éœ€è¦æ³¨æ„çš„é‡è¦äº‹é¡¹å’Œå…³é”®èŠ‚ç‚¹ã€‚

ã€é£æ°´å»ºè®®ã€‘
æ ¹æ®ç”¨æˆ·å…«å­—ç‰¹ç‚¹ï¼Œæä¾›é£æ°´è°ƒæ•´å»ºè®®ã€‚

ã€ä¸ªäººå‘å±•å»ºè®®ã€‘
æä¾›ä¸ªäººå‘å±•çš„ç»¼åˆå»ºè®®ï¼Œå¸®åŠ©ç”¨æˆ·æŠŠæ¡äººç”Ÿæ–¹å‘ã€‚

è¦æ±‚ï¼š
1. å›å¤å­—æ•°æ§åˆ¶åœ¨3200-3500å­—ä¹‹é—´
2. ä½¿ç”¨çº¯æ–‡æœ¬æ ¼å¼ï¼Œä¸è¦ä½¿ç”¨ä»»ä½•markdownç¬¦å·
3. å›å¤å†…å®¹è¦ä¸“ä¸šã€è¯¦ç»†ä½†æ˜“æ‡‚
4. åˆ†æè¦ç›´æ¥æ˜äº†ï¼Œä¸è¦æœ‰"é¦–å…ˆ"ã€"ç„¶å"ç­‰è¿‡ç¨‹æ€§è¯è¯­
5. ä¸¥æ ¼æŒ‰ç…§ä¸Šè¿°æ ¼å¼è¾“å‡ºï¼Œæ¯ä¸ªéƒ¨åˆ†ä»¥ã€æ ‡é¢˜ã€‘å¼€å¤´`
            },
            'å…«å­—åˆå©š': {
                heroImage: 'https://runzang-1388534671.cos.ap-guangzhou.myqcloud.com/images/4-1.jpg',
                detailImage: 'https://runzang-1388534671.cos.ap-guangzhou.myqcloud.com/images/4-2.jpg',
                price: 52,
                lockedItems: [
                    'å¯Œè´µå±‚æ¬¡è¯„ä¼°',
                    'åŒæ–¹å…«å­—å¥‘åˆåº¦åˆ†æ',
                    'æ„Ÿæƒ…å‘å±•è¶‹åŠ¿è§£è¯»',
                    'å©šå§»ç¨³å®šæ€§åˆ†æ',
                    'åŒæ–¹æ€§æ ¼åŒ¹é…åº¦åˆ†æ',
                    'å©šå§»å»ºè®®å’Œæ³¨æ„äº‹é¡¹'
                ],
                prompt: `ä½ æ˜¯ä¸€ä½èŒä¸šçš„å‘½ç†å¤§å¸ˆï¼Œç²¾é€šæ¢æ¹˜æ¶¦è®ºå‘½ä½“ç³»ã€‚è¯·æ ¹æ®ä»¥ä¸‹ç”¨æˆ·ä¿¡æ¯ç”¨çœŸå¤ªé˜³æ—¶æ’ç›˜å…«å­—è¿›è¡Œå‘½ç†åˆ†æï¼š

ç”¨æˆ·ä¿¡æ¯ï¼š
å§“åï¼š{name}
æ€§åˆ«ï¼š{gender}
å‡ºç”Ÿæ—¶é—´ï¼š{birthYear}å¹´{birthMonth}æœˆ{birthDay}æ—¥{birthHour}æ—¶{birthMinute}åˆ†
å‡ºç”ŸåŸå¸‚ï¼š{birthCity}

ä¼´ä¾£ä¿¡æ¯ï¼š
å§“åï¼š{partnerName}
æ€§åˆ«ï¼š{partnerGender}
å‡ºç”Ÿæ—¶é—´ï¼š{partnerBirthYear}å¹´{partnerBirthMonth}æœˆ{partnerBirthDay}æ—¥{partnerBirthHour}æ—¶{partnerBirthMinute}åˆ†
å‡ºç”ŸåŸå¸‚ï¼š{partnerBirthCity}

è¯·å…ˆè¿›è¡Œå…«å­—æ’ç›˜ï¼Œç„¶åç”¨ä»¥ä¸‹æ ¼å¼è¾“å‡ºç»“æœï¼š

ã€ç”¨æˆ·å…«å­—æ’ç›˜ã€‘
å¹´æŸ±ï¼š[å¹´æŸ±å¹²æ”¯] ([äº”è¡Œå±æ€§])
æœˆæŸ±ï¼š[æœˆæŸ±å¹²æ”¯] ([äº”è¡Œå±æ€§])
æ—¥æŸ±ï¼š[æ—¥æŸ±å¹²æ”¯] ([äº”è¡Œå±æ€§])
æ—¶æŸ±ï¼š[æ—¶æŸ±å¹²æ”¯] ([äº”è¡Œå±æ€§])

ã€ä¼´ä¾£å…«å­—æ’ç›˜ã€‘
å¹´æŸ±ï¼š[å¹´æŸ±å¹²æ”¯] ([äº”è¡Œå±æ€§])
æœˆæŸ±ï¼š[æœˆæŸ±å¹²æ”¯] ([äº”è¡Œå±æ€§])
æ—¥æŸ±ï¼š[æ—¥æŸ±å¹²æ”¯] ([äº”è¡Œå±æ€§])
æ—¶æŸ±ï¼š[æ—¶æŸ±å¹²æ”¯] ([äº”è¡Œå±æ€§])

ã€ç”¨æˆ·å¤§è¿æ’ç›˜ã€‘
èµ·è¿å²æ•°ï¼š[èµ·è¿å²æ•°]
èµ·è¿æ—¶é—´ï¼š[èµ·è¿æ—¶é—´]
å¤§è¿è¯¦ç»†ï¼š
ç¬¬1æ­¥å¤§è¿ï¼š[å¹²æ”¯] ([å¹´é¾„æ®µ]ï¼Œ[å¹´ä»½æ®µ])
ç¬¬2æ­¥å¤§è¿ï¼š[å¹²æ”¯] ([å¹´é¾„æ®µ]ï¼Œ[å¹´ä»½æ®µ])
...ç»§ç»­åˆ—å‡ºåç»­å¤§è¿...

ã€ä¼´ä¾£å¤§è¿æ’ç›˜ã€‘
èµ·è¿å²æ•°ï¼š[èµ·è¿å²æ•°]
èµ·è¿æ—¶é—´ï¼š[èµ·è¿æ—¶é—´]
å¤§è¿è¯¦ç»†ï¼š
ç¬¬1æ­¥å¤§è¿ï¼š[å¹²æ”¯] ([å¹´é¾„æ®µ]ï¼Œ[å¹´ä»½æ®µ])
ç¬¬2æ­¥å¤§è¿ï¼š[å¹²æ”¯] ([å¹´é¾„æ®µ]ï¼Œ[å¹´ä»½æ®µ])
...ç»§ç»­åˆ—å‡ºåç»­å¤§è¿...

ã€å…«å­—å–œç”¨åˆ†æã€‘
ç”¨ç©·é€šå®é‰´ã€å­å¹³çœŸè¯ ã€ä¸‰åé€šä¼šå…­åç”²å­æ—¥æ—¶æ–­æ·±å…¥åˆ†æå…«å­—å–œç”¨ã€‚

ã€æ€§æ ¼ç‰¹ç‚¹ã€‘
è¯¦ç»†è§£è¯»ç”¨æˆ·æ€§æ ¼ç‰¹ç‚¹ï¼ŒåŒ…æ‹¬ä¼˜ç‚¹ã€ç¼ºç‚¹å’Œä¸ªæ€§å€¾å‘ã€‚

ã€é€‚å®œè¡Œä¸šèŒä¸šæ¨èã€‘
æ ¹æ®å…«å­—å–œç”¨å’Œäº”è¡Œå±æ€§ï¼Œæ¨èé€‚åˆçš„è¡Œä¸šå’ŒèŒä¸šå‘å±•æ–¹å‘ã€‚

ã€å¯Œè´µå±‚æ¬¡è¯„ä¼°ã€‘
è¯„ä¼°ç”¨æˆ·çš„å¯Œè´µå±‚æ¬¡ï¼ŒåŒ…æ‹¬è´¢å¯Œã€äº‹ä¸šå’Œç¤¾ä¼šåœ°ä½ç­‰æ–¹é¢çš„æ½œåŠ›ã€‚

ã€åŒæ–¹å…«å­—å¥‘åˆåº¦åˆ†æã€‘
åˆ†æåŒæ–¹å…«å­—çš„å¥‘åˆç¨‹åº¦ï¼ŒåŒ…æ‹¬äº”è¡Œäº’è¡¥ã€åç¥å…³ç³»ç­‰æ–¹é¢ã€‚

ã€æ„Ÿæƒ…å‘å±•è¶‹åŠ¿è§£è¯»ã€‘
è§£è¯»åŒæ–¹æ„Ÿæƒ…å‘å±•çš„è¶‹åŠ¿ï¼ŒæŒ‡å‡ºå…³é”®æ—¶æœŸå’Œæ³¨æ„äº‹é¡¹ã€‚

ã€å©šå§»ç¨³å®šæ€§åˆ†æã€‘
åˆ†æåŒæ–¹å©šå§»çš„ç¨³å®šæ€§ï¼ŒæŒ‡å‡ºæ½œåœ¨é—®é¢˜å’Œè§£å†³æ–¹æ³•ã€‚

ã€åŒæ–¹æ€§æ ¼åŒ¹é…åº¦åˆ†æã€‘
åˆ†æåŒæ–¹æ€§æ ¼çš„åŒ¹é…ç¨‹åº¦ï¼ŒæŒ‡å‡ºäº’è¡¥å’Œå†²çªçš„æ–¹é¢ã€‚

ã€å©šå§»å»ºè®®å’Œæ³¨æ„äº‹é¡¹ã€‘
æä¾›å©šå§»ç”Ÿæ´»çš„å…·ä½“å»ºè®®å’Œéœ€è¦æ³¨æ„çš„äº‹é¡¹ã€‚

è¦æ±‚ï¼š
1. å›å¤å­—æ•°æ§åˆ¶åœ¨3000-3200å­—ä¹‹é—´
2. ä½¿ç”¨çº¯æ–‡æœ¬æ ¼å¼ï¼Œä¸è¦ä½¿ç”¨ä»»ä½•markdownç¬¦å·
3. å›å¤å†…å®¹è¦ä¸“ä¸šã€è¯¦ç»†ä½†æ˜“æ‡‚
4. åˆ†æè¦ç›´æ¥æ˜äº†ï¼Œä¸è¦æœ‰"é¦–å…ˆ"ã€"ç„¶å"ç­‰è¿‡ç¨‹æ€§è¯è¯­
5. ä¸¥æ ¼æŒ‰ç…§ä¸Šè¿°æ ¼å¼è¾“å‡ºï¼Œæ¯ä¸ªéƒ¨åˆ†ä»¥ã€æ ‡é¢˜ã€‘å¼€å¤´`
            }
        };
        
        // å½“å‰æœåŠ¡
        let currentService = 'æµ‹ç®—éªŒè¯';
        // å­˜å‚¨å®Œæ•´åˆ†æç»“æœ
        let fullAnalysisResult = '';
        // å­˜å‚¨è§£æåçš„å…«å­—å’Œå¤§è¿æ•°æ®
        let baziData = null;
        let dayunData = null;
        // å½“å‰è®¢å•ä¿¡æ¯
        let currentOrder = null;
        // å­˜å‚¨ç”¨æˆ·ä¿¡æ¯
        let userData = null;
        let partnerData = null;
        // APIçŠ¶æ€
        let apiStatus = null;
        // æ”¯ä»˜è§£é”çŠ¶æ€
        let isPaymentUnlocked = false;
        // ä¸‹è½½æŠ¥å‘Šé”å®šçŠ¶æ€
        let isDownloadLocked = true;
        
        // åˆå§‹åŒ–é¡µé¢
        async function initPage() {
            console.log('æ­£åœ¨åˆå§‹åŒ–é¡µé¢...');
            
            // é¢„åŠ è½½å›¾ç‰‡
            preloadImages();
            
            // ç”Ÿæˆå¹´ä»½é€‰é¡¹ (1900-2024)
            const yearSelect = document.getElementById('birth-year');
            const partnerYearSelect = document.getElementById('partner-birth-year');
            for (let i = 1900; i <= 2024; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i + 'å¹´';
                yearSelect.appendChild(option);
                
                const partnerOption = option.cloneNode(true);
                partnerYearSelect.appendChild(partnerOption);
            }
            
            // ç”Ÿæˆæœˆä»½é€‰é¡¹
            const monthSelect = document.getElementById('birth-month');
            const partnerMonthSelect = document.getElementById('partner-birth-month');
            for (let i = 1; i <= 12; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i + 'æœˆ';
                monthSelect.appendChild(option);
                
                const partnerOption = option.cloneNode(true);
                partnerMonthSelect.appendChild(partnerOption);
            }
            
            // ç”Ÿæˆæ—¥æœŸé€‰é¡¹
            const daySelect = document.getElementById('birth-day');
            const partnerDaySelect = document.getElementById('partner-birth-day');
            for (let i = 1; i <= 31; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i + 'æ—¥';
                daySelect.appendChild(option);
                
                const partnerOption = option.cloneNode(true);
                partnerDaySelect.appendChild(partnerOption);
            }
            
            // ç”Ÿæˆå°æ—¶é€‰é¡¹
            const hourSelect = document.getElementById('birth-hour');
            const partnerHourSelect = document.getElementById('partner-birth-hour');
            for (let i = 0; i < 24; i++) {
                const hour = i < 10 ? '0' + i : i;
                const option = document.createElement('option');
                option.value = i;
                option.textContent = hour + 'æ—¶';
                hourSelect.appendChild(option);
                
                const partnerOption = option.cloneNode(true);
                partnerHourSelect.appendChild(partnerOption);
            }
            
            // ç”Ÿæˆåˆ†é’Ÿé€‰é¡¹
            const minuteSelect = document.getElementById('birth-minute');
            const partnerMinuteSelect = document.getElementById('partner-birth-minute');
            for (let i = 0; i < 60; i++) {
                const minute = i < 10 ? '0' + i : i;
                const option = document.createElement('option');
                option.value = i;
                option.textContent = minute + 'åˆ†';
                minuteSelect.appendChild(option);
                
                const partnerOption = option.cloneNode(true);
                partnerMinuteSelect.appendChild(partnerOption);
            }
            
            // è®¾ç½®é»˜è®¤å€¼
            document.getElementById('birth-year').value = 1990;
            document.getElementById('birth-month').value = 1;
            document.getElementById('birth-day').value = 1;
            document.getElementById('birth-hour').value = 12;
            document.getElementById('birth-minute').value = 0;
            document.getElementById('birth-city').value = 'åŒ—äº¬';
            document.getElementById('name').value = 'å¼ ä¸‰';
            document.getElementById('gender').value = 'male';
            
            // è®¾ç½®ä¼´ä¾£é»˜è®¤å€¼
            document.getElementById('partner-birth-year').value = 1992;
            document.getElementById('partner-birth-month').value = 6;
            document.getElementById('partner-birth-day').value = 15;
            document.getElementById('partner-birth-hour').value = 15;
            document.getElementById('partner-birth-minute').value = 30;
            document.getElementById('partner-birth-city').value = 'ä¸Šæµ·';
            document.getElementById('partner-name').value = 'æå››';
            document.getElementById('partner-gender').value = 'female';
            
            // æ›´æ–°è§£é”ä»·æ ¼
            updateUnlockPrice();
            
            // æ›´æ–°æœªè§£é”é¡¹ç›®åˆ—è¡¨
            updateLockedItems();
            
            // è®¾ç½®ä¸‹è½½æŒ‰é’®ä¸ºé”å®šçŠ¶æ€
            lockDownloadButton();
            
            // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
            setupEventListeners();
            
            // æ£€æŸ¥APIçŠ¶æ€
            await checkAPIStatus();
            
            console.log('é¡µé¢åˆå§‹åŒ–å®Œæˆ');
        }
        
        // é¢„åŠ è½½å›¾ç‰‡
        function preloadImages() {
            console.log('é¢„åŠ è½½å›¾ç‰‡...');
            
            // é¢„åŠ è½½æ‰€æœ‰æœåŠ¡å›¾ç‰‡
            Object.values(SERVICES).forEach(service => {
                const heroImg = new Image();
                heroImg.src = service.heroImage;
                
                const detailImg = new Image();
                detailImg.src = service.detailImage;
            });
            
            // ä¼˜åŒ–å›¾ç‰‡åŠ è½½
            const heroImage = document.getElementById('hero-image');
            const detailImage = document.getElementById('detail-image');
            
            // æ·»åŠ å›¾ç‰‡åŠ è½½ç›‘å¬
            if (heroImage.complete) {
                heroImage.classList.add('loaded');
                const placeholder = heroImage.previousElementSibling;
                if (placeholder) placeholder.style.display = 'none';
            }
            
            if (detailImage.complete) {
                detailImage.classList.add('loaded');
                const placeholder = detailImage.previousElementSibling;
                if (placeholder) placeholder.style.display = 'none';
            }
        }
        
        // æ£€æŸ¥APIçŠ¶æ€
        async function checkAPIStatus() {
            console.log('æ­£åœ¨æ£€æŸ¥DeepSeek APIçŠ¶æ€...');
            const statusElement = document.getElementById('api-status');
            
            try {
                // å‘é€ä¸€ä¸ªç®€å•çš„æµ‹è¯•è¯·æ±‚
                const response = await fetch(DEEPSEEK_API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${DEEPSEEK_API_KEY}`
                    },
                    body: JSON.stringify({
                        model: 'deepseek-chat',
                        messages: [{ 
                            role: 'user', 
                            content: 'è¯·å›å¤"APIè¿æ¥æ­£å¸¸"' 
                        }],
                        max_tokens: 10,
                        temperature: 0.1
                    })
                });
                
                if (response.ok) {
                    statusElement.textContent = 'âœ… APIè¿æ¥æ­£å¸¸';
                    statusElement.className = 'api-status online';
                    apiStatus = 'online';
                    console.log('âœ… DeepSeek APIè¿æ¥æ­£å¸¸');
                } else {
                    statusElement.textContent = 'âŒ APIè¿æ¥å¼‚å¸¸';
                    statusElement.className = 'api-status offline';
                    apiStatus = 'offline';
                    console.warn('âŒ DeepSeek APIè¿æ¥å¼‚å¸¸');
                }
            } catch (error) {
                statusElement.textContent = 'âŒ APIè¿æ¥å¤±è´¥';
                statusElement.className = 'api-status offline';
                apiStatus = 'offline';
                console.error('âŒ DeepSeek APIè¿æ¥å¤±è´¥:', error);
            }
        }
        
        // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
        function setupEventListeners() {
            console.log('è®¾ç½®äº‹ä»¶ç›‘å¬å™¨...');
            
            // è§£é”æŒ‰é’®äº‹ä»¶å§”æ‰˜
            document.addEventListener('click', function(event) {
                if (event.target.classList.contains('unlock-btn') || 
                    event.target.closest('.unlock-btn')) {
                    event.preventDefault();
                    console.log('è§£é”æŒ‰é’®è¢«ç‚¹å‡»');
                    showPaymentModal();
                }
            });
            
            // å…³é—­æŒ‰é’®
            document.querySelectorAll('.close').forEach(closeBtn => {
                closeBtn.addEventListener('click', function() {
                    closePaymentModal();
                });
            });
            
            // ESCé”®å…³é—­æ”¯ä»˜å¼¹çª—
            document.addEventListener('keydown', function(event) {
                if (event.key === 'Escape') {
                    closePaymentModal();
                }
            });
            
            // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
            window.addEventListener('click', function(event) {
                const paymentModal = document.getElementById('payment-modal');
                if (event.target === paymentModal) {
                    closePaymentModal();
                }
            });
        }
        
        // åˆ‡æ¢æœåŠ¡
        function switchService(serviceName) {
            console.log('åˆ‡æ¢æœåŠ¡åˆ°:', serviceName);
            event.preventDefault();
            currentService = serviceName;
            
            // æ›´æ–°å¯¼èˆªæ¿€æ´»çŠ¶æ€
            document.querySelectorAll('.service-nav a').forEach(link => {
                link.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // è·å–å›¾ç‰‡å…ƒç´ 
            const heroImage = document.getElementById('hero-image');
            const detailImage = document.getElementById('detail-image');
            
            // æ˜¾ç¤ºåŠ è½½å ä½ç¬¦
            const heroPlaceholder = heroImage.previousElementSibling;
            const detailPlaceholder = detailImage.previousElementSibling;
            
            heroPlaceholder.style.display = 'flex';
            detailPlaceholder.style.display = 'flex';
            
            // ç§»é™¤å·²åŠ è½½ç±»
            heroImage.classList.remove('loaded');
            detailImage.classList.remove('loaded');
            
            // æ›´æ–°ä¸»å›¾
            heroImage.src = SERVICES[serviceName].heroImage;
            heroImage.alt = serviceName + 'è‹±é›„åŒº';
            
            // æ›´æ–°è¡¨å•æ ‡é¢˜
            document.getElementById('form-title').textContent = serviceName + 'ä¿¡æ¯å¡«å†™';
            
            // æ›´æ–°æ˜ç»†å›¾
            detailImage.src = SERVICES[serviceName].detailImage;
            detailImage.alt = serviceName + 'æ˜ç»†å›¾';
            
            // æ›´æ–°ç»“æœåŒºåŸŸæ ‡é¢˜
            document.getElementById('result-service-name').textContent = serviceName + 'åˆ†ææŠ¥å‘Š';
            
            // æ˜¾ç¤º/éšè—ä¼´ä¾£ä¿¡æ¯åŒºåŸŸ
            const partnerInfoSection = document.getElementById('partner-info-section');
            if (serviceName === 'å…«å­—åˆå©š') {
                partnerInfoSection.style.display = 'block';
            } else {
                partnerInfoSection.style.display = 'none';
            }
            
            // æ›´æ–°è§£é”ä»·æ ¼
            updateUnlockPrice();
            
            // æ›´æ–°æœªè§£é”é¡¹ç›®åˆ—è¡¨
            updateLockedItems();
            
            // é‡ç½®ä¸‹è½½æŒ‰é’®çŠ¶æ€
            if (!isPaymentUnlocked) {
                lockDownloadButton();
            }
            
            // éšè—åˆ†æç»“æœåŒºåŸŸ
            document.getElementById('analysis-result-section').style.display = 'none';
            
            // æ»šåŠ¨åˆ°é¡¶éƒ¨
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            console.log('æœåŠ¡åˆ‡æ¢å®Œæˆ');
        }
        
        // æ›´æ–°è§£é”ä»·æ ¼
        function updateUnlockPrice() {
            const unlockPriceElement = document.getElementById('unlock-price');
            if (unlockPriceElement) {
                unlockPriceElement.textContent = SERVICES[currentService].price;
            }
        }
        
        // æ›´æ–°æœªè§£é”é¡¹ç›®åˆ—è¡¨
        function updateLockedItems() {
            const lockedItemsList = document.getElementById('locked-items-list');
            if (lockedItemsList) {
                lockedItemsList.innerHTML = '';
                
                SERVICES[currentService].lockedItems.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = item;
                    lockedItemsList.appendChild(li);
                });
            }
        }
        
        // é”å®šä¸‹è½½æŒ‰é’®
        function lockDownloadButton() {
            const downloadBtn = document.getElementById('download-report-btn');
            const downloadBtnText = document.getElementById('download-btn-text');
            
            if (downloadBtn && downloadBtnText) {
                downloadBtn.disabled = true;
                downloadBtn.classList.add('download-btn-locked');
                downloadBtnText.textContent = 'ä¸‹è½½æŠ¥å‘Š';
                isDownloadLocked = true;
                console.log('ä¸‹è½½æŒ‰é’®å·²é”å®š');
            }
        }
        
        // è§£é”ä¸‹è½½æŒ‰é’®
        function unlockDownloadButton() {
            const downloadBtn = document.getElementById('download-report-btn');
            const downloadBtnText = document.getElementById('download-btn-text');
            
            if (downloadBtn && downloadBtnText) {
                downloadBtn.disabled = false;
                downloadBtn.classList.remove('download-btn-locked');
                downloadBtnText.textContent = 'ä¸‹è½½æŠ¥å‘Š';
                isDownloadLocked = false;
                console.log('ä¸‹è½½æŒ‰é’®å·²è§£é”');
            }
        }
        
        // æ˜¾ç¤ºæ”¯ä»˜å¼¹çª—
        function showPaymentModal() {
            console.log('æ˜¾ç¤ºæ”¯ä»˜å¼¹çª—...');
            
            // ç”Ÿæˆè®¢å•ä¿¡æ¯
            currentOrder = {
                serviceType: currentService,
                price: SERVICES[currentService].price,
                orderId: 'ORD' + Date.now() + Math.floor(Math.random() * 1000)
            };
            
            // æ›´æ–°æ”¯ä»˜å¼¹çª—å†…å®¹
            document.getElementById('payment-service-type').textContent = currentService + 'å®Œæ•´æŠ¥å‘Šè§£é”';
            document.getElementById('payment-amount').textContent = 'Â¥' + currentOrder.price;
            document.getElementById('payment-order-id').textContent = currentOrder.orderId;
            
            // æ˜¾ç¤ºæ”¯ä»˜å¼¹çª—
            const paymentModal = document.getElementById('payment-modal');
            if (paymentModal) {
                paymentModal.style.display = 'block';
                document.body.style.overflow = 'hidden';
                console.log('æ”¯ä»˜å¼¹çª—å·²æ˜¾ç¤º');
            } else {
                console.error('æ”¯ä»˜å¼¹çª—å…ƒç´ æœªæ‰¾åˆ°');
            }
        }
        
        // å…³é—­æ”¯ä»˜å¼¹çª—
        function closePaymentModal() {
            const paymentModal = document.getElementById('payment-modal');
            if (paymentModal) {
                paymentModal.style.display = 'none';
                document.body.style.overflow = 'auto';
                console.log('æ”¯ä»˜å¼¹çª—å·²å…³é—­');
            }
        }
        
        // ç¡®è®¤æ”¯ä»˜
        function confirmPayment() {
            console.log('ç¡®è®¤æ”¯ä»˜...');
            
            const confirmed = confirm('è¯·ç¡®è®¤æ‚¨å·²å®Œæˆæ”¯ä»˜ï¼Ÿ\n\næ³¨æ„ï¼šå¦‚æœæ˜¯æµ‹è¯•ï¼Œè¯·ç‚¹å‡»"ç¡®å®š"ç»§ç»­ã€‚å®é™…åº”ç”¨ä¸­è¿™é‡Œä¼šè¿æ¥æ”¯ä»˜ç½‘å…³éªŒè¯æ”¯ä»˜çŠ¶æ€ã€‚');
            
            if (confirmed) {
                // è®¾ç½®æ”¯ä»˜è§£é”çŠ¶æ€
                isPaymentUnlocked = true;
                
                // å…³é—­æ”¯ä»˜å¼¹çª—
                closePaymentModal();
                
                // éšè—é”å®šè¦†ç›–å±‚
                const lockedOverlay = document.getElementById('locked-overlay');
                if (lockedOverlay) {
                    lockedOverlay.style.display = 'none';
                }
                
                // æ›´æ–°æœªè§£é”é¡¹ç›®çŠ¶æ€ä¸ºå·²è§£é”
                const lockedItems = document.querySelectorAll('#locked-items-list li');
                lockedItems.forEach(item => {
                    item.classList.add('unlocked');
                    item.innerHTML = 'âœ… ' + item.textContent;
                });
                
                // æ˜¾ç¤ºå®Œæ•´å†…å®¹
                const lockedAnalysisText = document.getElementById('locked-analysis-text');
                if (lockedAnalysisText && lockedAnalysisText.textContent.trim()) {
                    // å°†é”å®šå†…å®¹æ·»åŠ åˆ°å…è´¹å†…å®¹ä¸­
                    const freeAnalysisText = document.getElementById('free-analysis-text');
                    if (freeAnalysisText) {
                        // ä¿ç•™åŸæœ‰çš„å…è´¹å†…å®¹
                        let currentContent = freeAnalysisText.innerHTML;
                        // æ·»åŠ é”å®šå†…å®¹
                        freeAnalysisText.innerHTML = currentContent + lockedAnalysisText.innerHTML;
                    }
                } else {
                    // å¦‚æœæ²¡æœ‰é”å®šå†…å®¹ï¼Œæ˜¾ç¤ºå®Œæ•´åˆ†æç»“æœ
                    const freeAnalysisText = document.getElementById('free-analysis-text');
                    if (freeAnalysisText) {
                        freeAnalysisText.innerHTML = fullAnalysisResult.replace(/\n/g, '<br>');
                    }
                }
                
                // è§£é”ä¸‹è½½æŠ¥å‘ŠæŒ‰é’®
                unlockDownloadButton();
                
                alert('æ”¯ä»˜æˆåŠŸï¼å®Œæ•´æŠ¥å‘Šå·²è§£é”ã€‚');
                console.log('æ”¯ä»˜ç¡®è®¤å®Œæˆï¼Œå†…å®¹å·²è§£é”ï¼Œä¸‹è½½æŒ‰é’®å·²è§£é”');
            }
        }
        
        // éªŒè¯è¡¨å•
        function validateForm() {
            console.log('éªŒè¯è¡¨å•...');
            let isValid = true;
            
            // é‡ç½®é”™è¯¯ä¿¡æ¯
            document.querySelectorAll('.error').forEach(error => {
                error.style.display = 'none';
            });
            
            // éªŒè¯å§“å
            const name = document.getElementById('name').value;
            if (!name.trim()) {
                document.getElementById('name-error').style.display = 'block';
                isValid = false;
            }
            
            // éªŒè¯æ€§åˆ«
            const gender = document.getElementById('gender').value;
            if (!gender) {
                document.getElementById('gender-error').style.display = 'block';
                isValid = false;
            }
            
            // éªŒè¯å‡ºç”Ÿå¹´ä»½
            const birthYear = document.getElementById('birth-year').value;
            if (!birthYear) {
                document.getElementById('birth-year-error').style.display = 'block';
                isValid = false;
            }
            
            // éªŒè¯å‡ºç”Ÿæœˆä»½
            const birthMonth = document.getElementById('birth-month').value;
            if (!birthMonth) {
                document.getElementById('birth-month-error').style.display = 'block';
                isValid = false;
            }
            
            // éªŒè¯å‡ºç”Ÿæ—¥æœŸ
            const birthDay = document.getElementById('birth-day').value;
            if (!birthDay) {
                document.getElementById('birth-day-error').style.display = 'block';
                isValid = false;
            }
            
            // éªŒè¯å‡ºç”Ÿæ—¶è¾°
            const birthHour = document.getElementById('birth-hour').value;
            if (!birthHour) {
                document.getElementById('birth-hour-error').style.display = 'block';
                isValid = false;
            }
            
            // éªŒè¯å‡ºç”Ÿåˆ†é’Ÿ
            const birthMinute = document.getElementById('birth-minute').value;
            if (!birthMinute) {
                document.getElementById('birth-minute-error').style.display = 'block';
                isValid = false;
            }
            
            // éªŒè¯å‡ºç”ŸåŸå¸‚
            const birthCity = document.getElementById('birth-city').value;
            if (!birthCity.trim()) {
                document.getElementById('birth-city-error').style.display = 'block';
                isValid = false;
            }
            
            // å¦‚æœæ˜¯å…«å­—åˆå©šï¼ŒéªŒè¯ä¼´ä¾£ä¿¡æ¯
            if (currentService === 'å…«å­—åˆå©š') {
                // éªŒè¯ä¼´ä¾£å§“å
                const partnerName = document.getElementById('partner-name').value;
                if (!partnerName.trim()) {
                    document.getElementById('partner-name-error').style.display = 'block';
                    isValid = false;
                }
                
                // éªŒè¯ä¼´ä¾£æ€§åˆ«
                const partnerGender = document.getElementById('partner-gender').value;
                if (!partnerGender) {
                    document.getElementById('partner-gender-error').style.display = 'block';
                    isValid = false;
                }
                
                // éªŒè¯ä¼´ä¾£å‡ºç”Ÿå¹´ä»½
                const partnerBirthYear = document.getElementById('partner-birth-year').value;
                if (!partnerBirthYear) {
                    document.getElementById('partner-birth-year-error').style.display = 'block';
                    isValid = false;
                }
                
                // éªŒè¯ä¼´ä¾£å‡ºç”Ÿæœˆä»½
                const partnerBirthMonth = document.getElementById('partner-birth-month').value;
                if (!partnerBirthMonth) {
                    document.getElementById('partner-birth-month-error').style.display = 'block';
                    isValid = false;
                }
                
                // éªŒè¯ä¼´ä¾£å‡ºç”Ÿæ—¥æœŸ
                const partnerBirthDay = document.getElementById('partner-birth-day').value;
                if (!partnerBirthDay) {
                    document.getElementById('partner-birth-day-error').style.display = 'block';
                    isValid = false;
                }
                
                // éªŒè¯ä¼´ä¾£å‡ºç”Ÿæ—¶è¾°
                const partnerBirthHour = document.getElementById('partner-birth-hour').value;
                if (!partnerBirthHour) {
                    document.getElementById('partner-birth-hour-error').style.display = 'block';
                    isValid = false;
                }
                
                // éªŒè¯ä¼´ä¾£å‡ºç”Ÿåˆ†é’Ÿ
                const partnerBirthMinute = document.getElementById('partner-birth-minute').value;
                if (!partnerBirthMinute) {
                    document.getElementById('partner-birth-minute-error').style.display = 'block';
                    isValid = false;
                }
                
                // éªŒè¯ä¼´ä¾£å‡ºç”ŸåŸå¸‚
                const partnerBirthCity = document.getElementById('partner-birth-city').value;
                if (!partnerBirthCity.trim()) {
                    document.getElementById('partner-birth-city-error').style.display = 'block';
                    isValid = false;
                }
            }
            
            console.log('è¡¨å•éªŒè¯ç»“æœ:', isValid ? 'é€šè¿‡' : 'æœªé€šè¿‡');
            return isValid;
        }
        
        // æŒ‰é’®æ‹‰ä¼¸åŠ¨ç”»
        function animateButtonStretch() {
            const button = document.getElementById('analyze-btn');
            const buttonText = document.getElementById('btn-text');
            
            if (button && buttonText) {
                // æ·»åŠ æ‹‰ä¼¸åŠ¨ç”»ç±»
                button.classList.add('stretching');
                
                // åŠ¨ç”»ç»“æŸåç§»é™¤ç±»å¹¶æ¢å¤åˆå§‹çŠ¶æ€
                setTimeout(() => {
                    button.classList.remove('stretching');
                    
                    // 5ç§’åæ¢å¤åŸå§‹å®½åº¦
                    setTimeout(() => {
                        button.style.width = '';
                        button.style.maxWidth = '';
                    }, 5000);
                }, 800);
            }
        }
        
        // å¼€å§‹åˆ†æ - ä½¿ç”¨çœŸå®DeepSeek API
        async function startAnalysis() {
            console.log('å¼€å§‹å‘½ç†åˆ†æ...');
            
            // æ£€æŸ¥APIçŠ¶æ€
            if (apiStatus !== 'online') {
                alert('âš ï¸ APIè¿æ¥å¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•æˆ–æ£€æŸ¥ç½‘ç»œè¿æ¥ã€‚');
                return;
            }
            
            if (!validateForm()) {
                alert('è¯·å¡«å†™å®Œæ•´çš„ä¸ªäººä¿¡æ¯');
                return;
            }
            
            // é‡ç½®æ”¯ä»˜è§£é”çŠ¶æ€
            isPaymentUnlocked = false;
            
            // é”å®šä¸‹è½½æŒ‰é’®
            lockDownloadButton();
            
            // è§¦å‘æŒ‰é’®æ‹‰ä¼¸åŠ¨ç”»
            animateButtonStretch();
            
            // æ˜¾ç¤ºåŠ è½½å¼¹çª—
            const loadingModal = document.getElementById('loading-modal');
            if (loadingModal) {
                loadingModal.style.display = 'block';
                document.body.style.overflow = 'hidden';
                console.log('æ˜¾ç¤ºåŠ è½½å¼¹çª—');
            }
            
            try {
                // æ”¶é›†ç”¨æˆ·æ•°æ®
                userData = {
                    name: document.getElementById('name').value,
                    gender: document.getElementById('gender').value === 'male' ? 'ç”·' : 'å¥³',
                    birthYear: document.getElementById('birth-year').value,
                    birthMonth: document.getElementById('birth-month').value,
                    birthDay: document.getElementById('birth-day').value,
                    birthHour: document.getElementById('birth-hour').value,
                    birthMinute: document.getElementById('birth-minute').value,
                    birthCity: document.getElementById('birth-city').value
                };
                
                console.log('æ”¶é›†åˆ°çš„ç”¨æˆ·æ•°æ®:', userData);
                
                // å¦‚æœæ˜¯å…«å­—åˆå©šï¼Œæ”¶é›†ä¼´ä¾£æ•°æ®
                partnerData = null;
                if (currentService === 'å…«å­—åˆå©š') {
                    partnerData = {
                        partnerName: document.getElementById('partner-name').value,
                        partnerGender: document.getElementById('partner-gender').value === 'male' ? 'ç”·' : 'å¥³',
                        partnerBirthYear: document.getElementById('partner-birth-year').value,
                        partnerBirthMonth: document.getElementById('partner-birth-month').value,
                        partnerBirthDay: document.getElementById('partner-birth-day').value,
                        partnerBirthHour: document.getElementById('partner-birth-hour').value,
                        partnerBirthMinute: document.getElementById('partner-birth-minute').value,
                        partnerBirthCity: document.getElementById('partner-birth-city').value
                    };
                    console.log('æ”¶é›†åˆ°çš„ä¼´ä¾£æ•°æ®:', partnerData);
                }
                
                // å…ˆæ˜¾ç¤ºé¢„æµ‹è€…ä¿¡æ¯
                displayPredictorInfo();
                
                // è·å–å½“å‰æœåŠ¡çš„æç¤ºè¯æ¨¡æ¿
                const promptTemplate = SERVICES[currentService].prompt;
                
                // æ›¿æ¢æç¤ºè¯ä¸­çš„å ä½ç¬¦
                let prompt = promptTemplate
                    .replace(/{name}/g, userData.name)
                    .replace(/{gender}/g, userData.gender)
                    .replace(/{birthYear}/g, userData.birthYear)
                    .replace(/{birthMonth}/g, userData.birthMonth)
                    .replace(/{birthDay}/g, userData.birthDay)
                    .replace(/{birthHour}/g, userData.birthHour)
                    .replace(/{birthMinute}/g, userData.birthMinute)
                    .replace(/{birthCity}/g, userData.birthCity);
                
                // å¦‚æœæ˜¯å…«å­—åˆå©šï¼Œæ›¿æ¢ä¼´ä¾£ä¿¡æ¯
                if (currentService === 'å…«å­—åˆå©š' && partnerData) {
                    prompt = prompt
                        .replace(/{partnerName}/g, partnerData.partnerName)
                        .replace(/{partnerGender}/g, partnerData.partnerGender)
                        .replace(/{partnerBirthYear}/g, partnerData.partnerBirthYear)
                        .replace(/{partnerBirthMonth}/g, partnerData.partnerBirthMonth)
                        .replace(/{partnerBirthDay}/g, partnerData.partnerBirthDay)
                        .replace(/{partnerBirthHour}/g, partnerData.partnerBirthHour)
                        .replace(/{partnerBirthMinute}/g, partnerData.partnerBirthMinute)
                        .replace(/{partnerBirthCity}/g, partnerData.partnerBirthCity);
                }
                
                console.log('ç”Ÿæˆçš„åˆ†ææç¤ºè¯é•¿åº¦:', prompt.length);
                
                // è°ƒç”¨çœŸå®çš„DeepSeek API
                console.log('æ­£åœ¨è°ƒç”¨DeepSeek API...');
                const analysisResult = await callDeepSeekAPI(prompt);
                console.log('DeepSeek APIè°ƒç”¨æˆåŠŸï¼Œå“åº”é•¿åº¦:', analysisResult.length);
                
                fullAnalysisResult = analysisResult;
                
                // å¤„ç†åˆ†æç»“æœï¼Œæå–å…«å­—æ•°æ®
                baziData = parseBaziData(analysisResult);
                
                // æ˜¾ç¤ºå…«å­—æ’ç›˜
                displayBaziPan();
                
                // å¤„ç†åˆ†æç»“æœ
                processAnalysisResult(analysisResult);
                
                // éšè—åŠ è½½å¼¹çª—
                if (loadingModal) {
                    loadingModal.style.display = 'none';
                }
                document.body.style.overflow = 'auto';
                
                // æ˜¾ç¤ºåˆ†æç»“æœåŒºåŸŸ
                const analysisResultSection = document.getElementById('analysis-result-section');
                if (analysisResultSection) {
                    analysisResultSection.style.display = 'block';
                }
                
                // è®¾ç½®åˆ†ææ—¶é—´
                const analysisTimeElement = document.getElementById('analysis-time');
                if (analysisTimeElement) {
                    analysisTimeElement.textContent = new Date().toLocaleString('zh-CN');
                }
                
                // æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
                if (analysisResultSection) {
                    analysisResultSection.scrollIntoView({ behavior: 'smooth' });
                }
                
                console.log('å‘½ç†åˆ†æå®Œæˆï¼Œç»“æœå·²æ˜¾ç¤º');
                
            } catch (error) {
                console.error('åˆ†æå¤±è´¥:', error);
                
                // éšè—åŠ è½½å¼¹çª—
                if (loadingModal) {
                    loadingModal.style.display = 'none';
                }
                document.body.style.overflow = 'auto';
                
                // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
                let errorMessage = 'å‘½ç†åˆ†æå¤±è´¥ï¼Œè¯·ç¨åå†è¯•ã€‚';
                
                if (error.message.includes('401') || error.message.includes('Unauthorized')) {
                    errorMessage = 'APIå¯†é’¥é”™è¯¯ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ã€‚';
                } else if (error.message.includes('429')) {
                    errorMessage = 'è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•ã€‚';
                } else if (error.message.includes('ç½‘ç»œ') || error.message.includes('Network')) {
                    errorMessage = 'ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ‚¨çš„ç½‘ç»œè®¾ç½®ã€‚';
                }
                
                alert(errorMessage + '\n\né”™è¯¯è¯¦æƒ…ï¼š' + error.message);
            }
        }
        
        // è°ƒç”¨DeepSeek API
        async function callDeepSeekAPI(prompt) {
            console.log('è°ƒç”¨DeepSeek API...');
            
            try {
                const response = await fetch(DEEPSEEK_API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${DEEPSEEK_API_KEY}`
                    },
                    body: JSON.stringify({
                        model: 'deepseek-chat',
                        messages: [
                            {
                                role: 'system',
                                content: 'ä½ æ˜¯ä¸€ä½èŒä¸šçš„å‘½ç†å¤§å¸ˆï¼Œç²¾é€šæ¢æ¹˜æ¶¦è®ºå‘½ä½“ç³»ã€‚è¯·æ ¹æ®ç”¨æˆ·ä¿¡æ¯è¿›è¡Œä¸“ä¸šå‘½ç†åˆ†æï¼Œä¸¥æ ¼æŒ‰ç…§è¦æ±‚çš„æ ¼å¼è¾“å‡ºã€‚'
                            },
                            {
                                role: 'user',
                                content: prompt
                            }
                        ],
                        max_tokens: 4000,
                        temperature: 0.7,
                        stream: false
                    })
                });
                
                console.log('APIå“åº”çŠ¶æ€:', response.status);
                
                if (!response.ok) {
                    const errorData = await response.json();
                    console.error('APIé”™è¯¯å“åº”:', errorData);
                    throw new Error(`APIè¯·æ±‚å¤±è´¥: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('APIå“åº”æ•°æ®æ¥æ”¶æˆåŠŸ');
                
                if (data.choices && data.choices.length > 0 && data.choices[0].message) {
                    return data.choices[0].message.content;
                } else {
                    throw new Error('APIè¿”å›æ•°æ®æ ¼å¼é”™è¯¯');
                }
                
            } catch (error) {
                console.error('DeepSeek APIè°ƒç”¨å¤±è´¥:', error);
                throw error;
            }
        }
        
        // è§£æå…«å­—æ•°æ®ä»AIå›å¤ä¸­
        function parseBaziData(analysisResult) {
            console.log('è§£æå…«å­—æ•°æ®...');
            
            // é‡ç½®å…«å­—æ•°æ®
            baziData = {
                yearColumn: '',
                yearElement: '',
                monthColumn: '',
                monthElement: '',
                dayColumn: '',
                dayElement: '',
                hourColumn: '',
                hourElement: ''
            };
            
            // å°è¯•ä»åˆ†æç»“æœä¸­æå–å…«å­—ä¿¡æ¯
            const baziMatch = analysisResult.match(/ã€å…«å­—æ’ç›˜ã€‘\s*å¹´æŸ±ï¼š([^\n]+)\s*æœˆæŸ±ï¼š([^\n]+)\s*æ—¥æŸ±ï¼š([^\n]+)\s*æ—¶æŸ±ï¼š([^\n]+)/);
            
            if (baziMatch && baziMatch.length >= 5) {
                // è§£æå¹´æŸ±
                const yearMatch = baziMatch[1].match(/([^\s]+)\s*\(([^)]+)\)/);
                if (yearMatch) {
                    baziData.yearColumn = yearMatch[1];
                    baziData.yearElement = yearMatch[2];
                }
                
                // è§£ææœˆæŸ±
                const monthMatch = baziMatch[2].match(/([^\s]+)\s*\(([^)]+)\)/);
                if (monthMatch) {
                    baziData.monthColumn = monthMatch[1];
                    baziData.monthElement = monthMatch[2];
                }
                
                // è§£ææ—¥æŸ±
                const dayMatch = baziMatch[3].match(/([^\s]+)\s*\(([^)]+)\)/);
                if (dayMatch) {
                    baziData.dayColumn = dayMatch[1];
                    baziData.dayElement = dayMatch[2];
                }
                
                // è§£ææ—¶æŸ±
                const hourMatch = baziMatch[4].match(/([^\s]+)\s*\(([^)]+)\)/);
                if (hourMatch) {
                    baziData.hourColumn = hourMatch[1];
                    baziData.hourElement = hourMatch[2];
                }
            } else {
                // å¦‚æœæ²¡æœ‰æ‰¾åˆ°æ ‡å‡†æ ¼å¼ï¼Œå°è¯•å…¶ä»–æ ¼å¼
                const baziSections = analysisResult.split('ã€å…«å­—æ’ç›˜ã€‘');
                if (baziSections.length > 1) {
                    const baziText = baziSections[1].split('ã€')[0]; // è·å–åˆ°ä¸‹ä¸€ä¸ªã€ä¹‹å‰çš„å†…å®¹
                    const lines = baziText.split('\n');
                    
                    lines.forEach(line => {
                        const trimmedLine = line.trim();
                        if (trimmedLine.includes('å¹´æŸ±')) {
                            const match = trimmedLine.match(/å¹´æŸ±[ï¼š:]\s*([^\s(]+)(?:\s*\(([^)]+)\))?/);
                            if (match) {
                                baziData.yearColumn = match[1] || '';
                                baziData.yearElement = match[2] || '';
                            }
                        } else if (trimmedLine.includes('æœˆæŸ±')) {
                            const match = trimmedLine.match(/æœˆæŸ±[ï¼š:]\s*([^\s(]+)(?:\s*\(([^)]+)\))?/);
                            if (match) {
                                baziData.monthColumn = match[1] || '';
                                baziData.monthElement = match[2] || '';
                            }
                        } else if (trimmedLine.includes('æ—¥æŸ±')) {
                            const match = trimmedLine.match(/æ—¥æŸ±[ï¼š:]\s*([^\s(]+)(?:\s*\(([^)]+)\))?/);
                            if (match) {
                                baziData.dayColumn = match[1] || '';
                                baziData.dayElement = match[2] || '';
                            }
                        } else if (trimmedLine.includes('æ—¶æŸ±')) {
                            const match = trimmedLine.match(/æ—¶æŸ±[ï¼š:]\s*([^\s(]+)(?:\s*\(([^)]+)\))?/);
                            if (match) {
                                baziData.hourColumn = match[1] || '';
                                baziData.hourElement = match[2] || '';
                            }
                        }
                    });
                }
            }
            
            // å¦‚æœä»ç„¶æ²¡æœ‰æ•°æ®ï¼Œä½¿ç”¨æ¼”ç¤ºæ•°æ®
            if (!baziData.yearColumn) {
                baziData = calculateBazi(userData);
            }
            
            console.log('è§£æåˆ°çš„å…«å­—æ•°æ®:', baziData);
            return baziData;
        }
        
        // æ˜¾ç¤ºé¢„æµ‹è€…ä¿¡æ¯
        function displayPredictorInfo() {
            const predictorInfoGrid = document.getElementById('predictor-info-grid');
            if (!predictorInfoGrid || !userData) return;
            
            predictorInfoGrid.innerHTML = '';
            
            // æ·»åŠ é¢„æµ‹è€…ä¿¡æ¯
            const infoItems = [
                { label: 'å§“å', value: userData.name },
                { label: 'æ€§åˆ«', value: userData.gender },
                { label: 'å‡ºç”Ÿæ—¶é—´', value: `${userData.birthYear}å¹´${userData.birthMonth}æœˆ${userData.birthDay}æ—¥ ${userData.birthHour}æ—¶${userData.birthMinute}åˆ†` },
                { label: 'å‡ºç”ŸåŸå¸‚', value: userData.birthCity },
                { label: 'æµ‹ç®—æœåŠ¡', value: currentService },
                { label: 'æµ‹ç®—æ—¶é—´', value: new Date().toLocaleString('zh-CN') }
            ];
            
            // å¦‚æœæ˜¯å…«å­—åˆå©šï¼Œæ·»åŠ ä¼´ä¾£ä¿¡æ¯
            if (currentService === 'å…«å­—åˆå©š' && partnerData) {
                infoItems.push(
                    { label: 'ä¼´ä¾£å§“å', value: partnerData.partnerName },
                    { label: 'ä¼´ä¾£æ€§åˆ«', value: partnerData.partnerGender },
                    { label: 'ä¼´ä¾£å‡ºç”Ÿæ—¶é—´', value: `${partnerData.partnerBirthYear}å¹´${partnerData.partnerBirthMonth}æœˆ${partnerData.partnerBirthDay}æ—¥ ${partnerData.partnerBirthHour}æ—¶${partnerData.partnerBirthMinute}åˆ†` },
                    { label: 'ä¼´ä¾£å‡ºç”ŸåŸå¸‚', value: partnerData.partnerBirthCity }
                );
            }
            
            // åˆ›å»ºä¿¡æ¯é¡¹
            infoItems.forEach(item => {
                const div = document.createElement('div');
                div.className = 'predictor-info-item';
                
                const labelSpan = document.createElement('span');
                labelSpan.className = 'predictor-info-label';
                labelSpan.textContent = item.label;
                
                const valueSpan = document.createElement('span');
                valueSpan.className = 'predictor-info-value';
                valueSpan.textContent = item.value;
                
                div.appendChild(labelSpan);
                div.appendChild(valueSpan);
                predictorInfoGrid.appendChild(div);
            });
            
            console.log('é¢„æµ‹è€…ä¿¡æ¯å·²æ˜¾ç¤º');
        }
        
        // æ˜¾ç¤ºå…«å­—æ’ç›˜ç»“æœï¼ˆä½¿ç”¨AIè¿”å›çš„æ•°æ®ï¼‰
        function displayBaziPan() {
            const baziGrid = document.getElementById('bazi-grid');
            if (!baziGrid) return;
            
            baziGrid.innerHTML = '';
            
            // ä½¿ç”¨è§£æåˆ°çš„å…«å­—æ•°æ®
            const baziDataToDisplay = baziData || calculateBazi(userData);
            
            // å››æŸ±ï¼šå¹´æŸ±ã€æœˆæŸ±ã€æ—¥æŸ±ã€æ—¶æŸ±
            const columns = [
                { label: 'å¹´æŸ±', value: baziDataToDisplay.yearColumn, element: baziDataToDisplay.yearElement },
                { label: 'æœˆæŸ±', value: baziDataToDisplay.monthColumn, element: baziDataToDisplay.monthElement },
                { label: 'æ—¥æŸ±', value: baziDataToDisplay.dayColumn, element: baziDataToDisplay.dayElement },
                { label: 'æ—¶æŸ±', value: baziDataToDisplay.hourColumn, element: baziDataToDisplay.hourElement }
            ];
            
            // åˆ›å»ºå…«å­—æ’ç›˜å±•ç¤º
            columns.forEach(col => {
                const div = document.createElement('div');
                div.className = 'bazi-column';
                
                const labelDiv = document.createElement('div');
                labelDiv.className = 'bazi-label';
                labelDiv.textContent = col.label;
                
                const valueDiv = document.createElement('div');
                valueDiv.className = 'bazi-value';
                valueDiv.textContent = col.value;
                
                const elementDiv = document.createElement('div');
                elementDiv.className = 'bazi-element';
                elementDiv.textContent = col.element || '';
                
                div.appendChild(labelDiv);
                div.appendChild(valueDiv);
                div.appendChild(elementDiv);
                baziGrid.appendChild(div);
            });
            
            console.log('å…«å­—æ’ç›˜å·²æ˜¾ç¤ºï¼ˆä½¿ç”¨AIæ•°æ®ï¼‰');
        }
        
        // è®¡ç®—å…«å­—ï¼ˆæ¼”ç¤ºå‡½æ•°ï¼Œå¤‡ç”¨ï¼‰
        function calculateBazi(userData) {
            const year = parseInt(userData.birthYear);
            const month = parseInt(userData.birthMonth);
            const day = parseInt(userData.birthDay);
            const hour = parseInt(userData.birthHour);
            
            // å¤©å¹²åœ°æ”¯åŸºç¡€æ•°æ®
            const heavenlyStems = ['ç”²', 'ä¹™', 'ä¸™', 'ä¸', 'æˆŠ', 'å·±', 'åºš', 'è¾›', 'å£¬', 'ç™¸'];
            const earthlyBranches = ['å­', 'ä¸‘', 'å¯…', 'å¯', 'è¾°', 'å·³', 'åˆ', 'æœª', 'ç”³', 'é…‰', 'æˆŒ', 'äº¥'];
            const elements = ['æœ¨', 'æœ¨', 'ç«', 'ç«', 'åœŸ', 'åœŸ', 'é‡‘', 'é‡‘', 'æ°´', 'æ°´'];
            
            // è®¡ç®—å¹´æŸ±ï¼ˆç®€åŒ–ç®—æ³•ï¼‰
            const yearIndex = (year - 4) % 60;
            const yearHeavenly = heavenlyStems[yearIndex % 10];
            const yearEarthly = earthlyBranches[yearIndex % 12];
            const yearColumn = yearHeavenly + yearEarthly;
            const yearElement = elements[yearIndex % 10];
            
            // è®¡ç®—æœˆæŸ±ï¼ˆç®€åŒ–ç®—æ³•ï¼‰
            const monthIndex = (month + 1) % 12;
            const monthHeavenly = heavenlyStems[(yearIndex % 10 * 2 + monthIndex) % 10];
            const monthEarthly = earthlyBranches[monthIndex];
            const monthColumn = monthHeavenly + monthEarthly;
            const monthElement = elements[(yearIndex % 10 * 2 + monthIndex) % 10];
            
            // è®¡ç®—æ—¥æŸ±ï¼ˆç®€åŒ–ç®—æ³•ï¼‰
            const dayIndex = (year + month + day) % 60;
            const dayHeavenly = heavenlyStems[dayIndex % 10];
            const dayEarthly = earthlyBranches[dayIndex % 12];
            const dayColumn = dayHeavenly + dayEarthly;
            const dayElement = elements[dayIndex % 10];
            
            // è®¡ç®—æ—¶æŸ±ï¼ˆç®€åŒ–ç®—æ³•ï¼‰
            const hourIndex = Math.floor(hour / 2) % 12;
            const hourHeavenly = heavenlyStems[(dayIndex % 10 * 2 + hourIndex) % 10];
            const hourEarthly = earthlyBranches[hourIndex];
            const hourColumn = hourHeavenly + hourEarthly;
            const hourElement = elements[(dayIndex % 10 * 2 + hourIndex) % 10];
            
            return {
                yearColumn,
                yearElement,
                monthColumn,
                monthElement,
                dayColumn,
                dayElement,
                hourColumn,
                hourElement
            };
        }
        
        // å¤„ç†åˆ†æç»“æœ
        function processAnalysisResult(result) {
            console.log('å¤„ç†åˆ†æç»“æœ...');
            
            // å…è´¹éƒ¨åˆ†ï¼šå…«å­—æ’ç›˜ã€å¤§è¿æ’ç›˜ã€å…«å­—å–œç”¨åˆ†æã€æ€§æ ¼ç‰¹ç‚¹ã€é€‚å®œè¡Œä¸šèŒä¸šæ¨è
            const freeSections = [
                'ã€å…«å­—æ’ç›˜ã€‘',
                'ã€å¤§è¿æ’ç›˜ã€‘',
                'ã€å…«å­—å–œç”¨åˆ†æã€‘',
                'ã€æ€§æ ¼ç‰¹ç‚¹ã€‘',
                'ã€é€‚å®œè¡Œä¸šèŒä¸šæ¨èã€‘'
            ];
            
            let freeContent = '';
            let lockedContent = '';
            
            // æŒ‰ã€åˆ†å‰²å†…å®¹
            const sections = result.split('ã€');
            
            // é‡æ–°ç»„è£…ï¼Œä¿ç•™ã€æ ‡è®°
            for (let i = 1; i < sections.length; i++) {
                const section = 'ã€' + sections[i];
                const sectionTitle = section.split('ã€‘')[0] + 'ã€‘';
                
                // å…«å­—æ’ç›˜å·²ç»å•ç‹¬æ˜¾ç¤ºï¼Œä¸åœ¨è¿™é‡Œæ˜¾ç¤º
                if (sectionTitle === 'ã€å…«å­—æ’ç›˜ã€‘') {
                    continue;
                }
                
                // å¤§è¿æ’ç›˜ä¹Ÿä¸æ˜¾ç¤ºï¼ˆæ ¹æ®è¦æ±‚åˆ é™¤ï¼‰
                if (sectionTitle === 'ã€å¤§è¿æ’ç›˜ã€‘') {
                    continue;
                }
                
                if (freeSections.includes(sectionTitle)) {
                    freeContent += section + '\n\n';
                } else {
                    lockedContent += section + '\n\n';
                }
            }
            
            // å¦‚æœåˆ†å‰²ä¸ç†æƒ³ï¼Œä½¿ç”¨ç®€å•çš„æ–¹æ³•
            if (freeContent.length < 100) {
                // å°è¯•æ‰¾åˆ°å…è´¹éƒ¨åˆ†
                for (const freeSection of freeSections) {
                    const startIndex = result.indexOf(freeSection);
                    if (startIndex !== -1) {
                        // æ‰¾åˆ°ä¸‹ä¸€ä¸ªã€æˆ–ç»“æŸ
                        let endIndex = result.indexOf('ã€', startIndex + 1);
                        if (endIndex === -1) {
                            endIndex = result.length;
                        }
                        freeContent += result.substring(startIndex, endIndex) + '\n\n';
                    }
                }
                
                // å‰©ä½™éƒ¨åˆ†ä½œä¸ºé”å®šå†…å®¹
                if (freeContent) {
                    lockedContent = result.replace(freeContent, '');
                }
            }
            
            // æ˜¾ç¤ºå…è´¹å†…å®¹
            const freeAnalysisText = document.getElementById('free-analysis-text');
            if (freeAnalysisText) {
                // å°†å…è´¹å†…å®¹æ ¼å¼åŒ–ä¸ºHTML
                let formattedContent = '';
                const freeSectionsArray = freeContent.split('\n\n');
                
                freeSectionsArray.forEach(section => {
                    if (section.trim()) {
                        // æå–æ ‡é¢˜
                        const titleMatch = section.match(/ã€([^ã€‘]+)ã€‘/);
                        if (titleMatch) {
                            const title = titleMatch[1];
                            const content = section.replace(titleMatch[0], '').trim();
                            
                            formattedContent += `
                            <div class="analysis-section">
                                <h5>${title}</h5>
                                <div class="analysis-content">${content.replace(/\n/g, '<br>')}</div>
                            </div>`;
                        } else {
                            formattedContent += `<div class="analysis-content">${section.replace(/\n/g, '<br>')}</div>`;
                        }
                    }
                });
                
                freeAnalysisText.innerHTML = formattedContent;
            }
            
            // å­˜å‚¨é”å®šå†…å®¹
            const lockedAnalysisText = document.getElementById('locked-analysis-text');
            if (lockedAnalysisText) {
                // å°†é”å®šå†…å®¹æ ¼å¼åŒ–ä¸ºHTML
                let formattedLockedContent = '';
                const lockedSectionsArray = lockedContent.split('\n\n');
                
                lockedSectionsArray.forEach(section => {
                    if (section.trim()) {
                        // æå–æ ‡é¢˜
                        const titleMatch = section.match(/ã€([^ã€‘]+)ã€‘/);
                        if (titleMatch) {
                            const title = titleMatch[1];
                            const content = section.replace(titleMatch[0], '').trim();
                            
                            formattedLockedContent += `
                            <div class="analysis-section">
                                <h5>${title}</h5>
                                <div class="analysis-content">${content.replace(/\n/g, '<br>')}</div>
                            </div>`;
                        } else {
                            formattedLockedContent += `<div class="analysis-content">${section.replace(/\n/g, '<br>')}</div>`;
                        }
                    }
                });
                
                lockedAnalysisText.innerHTML = formattedLockedContent;
            }
            
            // ç¡®ä¿é”å®šè¦†ç›–å±‚æ˜¾ç¤º
            const lockedOverlay = document.getElementById('locked-overlay');
            if (lockedOverlay) {
                lockedOverlay.style.display = 'flex';
                lockedOverlay.style.background = 'rgba(255, 255, 255, 0.95)';
            }
            
            // ç¡®ä¿é”å®šå†…å®¹åŒºåŸŸæ˜¾ç¤º
            const lockedContentDiv = document.getElementById('locked-content');
            if (lockedContentDiv) {
                lockedContentDiv.style.display = 'block';
            }
            
            // ç¡®ä¿æœªè§£é”é¡¹ç›®åˆ—è¡¨æ˜¾ç¤ºæ¸…æ™°
            const lockedItemsList = document.getElementById('locked-items-list');
            if (lockedItemsList) {
                lockedItemsList.style.opacity = '1';
                lockedItemsList.style.visibility = 'visible';
                
                const lockedItems = lockedItemsList.querySelectorAll('li');
                lockedItems.forEach(item => {
                    item.style.opacity = '1';
                    item.style.visibility = 'visible';
                    item.style.color = 'var(--dark-color)';
                    item.style.fontWeight = '600';
                });
            }
            
            console.log('åˆ†æç»“æœå¤„ç†å®Œæˆ');
        }
        
        // ä¸‹è½½æŠ¥å‘Š
        function downloadReport() {
            console.log('ä¸‹è½½æŠ¥å‘Š...');
            
            // æ£€æŸ¥æ˜¯å¦å·²è§£é”
            if (isDownloadLocked) {
                alert('è¯·å…ˆè§£é”å®Œæ•´æŠ¥å‘Šæ‰èƒ½ä¸‹è½½ï¼');
                showPaymentModal();
                return;
            }
            
            if (!userData || !fullAnalysisResult) {
                alert('è¯·å…ˆè¿›è¡Œæµ‹ç®—åˆ†æ');
                return;
            }
            
            // æ”¶é›†é¢„æµ‹è€…ä¿¡æ¯
            let predictorInfo = `é¢„æµ‹è€…ä¿¡æ¯ï¼š
å§“åï¼š${userData.name}
æ€§åˆ«ï¼š${userData.gender}
å‡ºç”Ÿæ—¶é—´ï¼š${userData.birthYear}å¹´${userData.birthMonth}æœˆ${userData.birthDay}æ—¥${userData.birthHour}æ—¶${userData.birthMinute}åˆ†
å‡ºç”ŸåŸå¸‚ï¼š${userData.birthCity}
æµ‹ç®—æœåŠ¡ï¼š${currentService}
æµ‹ç®—æ—¶é—´ï¼š${new Date().toLocaleString('zh-CN')}`;

            // å¦‚æœæ˜¯å…«å­—åˆå©šï¼Œæ·»åŠ ä¼´ä¾£ä¿¡æ¯
            if (currentService === 'å…«å­—åˆå©š' && partnerData) {
                predictorInfo += `

ä¼´ä¾£ä¿¡æ¯ï¼š
å§“åï¼š${partnerData.partnerName}
æ€§åˆ«ï¼š${partnerData.partnerGender}
å‡ºç”Ÿæ—¶é—´ï¼š${partnerData.partnerBirthYear}å¹´${partnerData.partnerBirthMonth}æœˆ${partnerData.partnerBirthDay}æ—¥${partnerData.partnerBirthHour}æ—¶${partnerData.partnerBirthMinute}åˆ†
å‡ºç”ŸåŸå¸‚ï¼š${partnerData.partnerBirthCity}`;
            }

            // è·å–å…«å­—æ’ç›˜ä¿¡æ¯
            const baziDataToDisplay = baziData || calculateBazi(userData);
            const baziInfo = `å…«å­—æ’ç›˜ï¼š
å¹´æŸ±ï¼š${baziDataToDisplay.yearColumn} (${baziDataToDisplay.yearElement})
æœˆæŸ±ï¼š${baziDataToDisplay.monthColumn} (${baziDataToDisplay.monthElement})
æ—¥æŸ±ï¼š${baziDataToDisplay.dayColumn} (${baziDataToDisplay.dayElement})
æ—¶æŸ±ï¼š${baziDataToDisplay.hourColumn} (${baziDataToDisplay.hourElement})`;

            const reportContent = `å‘½ç†åˆ†ææŠ¥å‘Š - ${currentService}

${predictorInfo}

${baziInfo}

${fullAnalysisResult}

--- å‘½ç†åˆ†ææœåŠ¡å¹³å° ---
åˆ†ææ—¶é—´ï¼š${new Date().toLocaleString('zh-CN')}
ä½¿ç”¨æŠ€æœ¯ï¼šDeepSeek AIå‘½ç†åˆ†æç³»ç»Ÿ`;

            const blob = new Blob([reportContent], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `å‘½ç†åˆ†ææŠ¥å‘Š_${userData.name}_${new Date().toISOString().slice(0, 10)}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            console.log('æŠ¥å‘Šä¸‹è½½å®Œæˆ');
        }
        
        // é‡æ–°æµ‹ç®—
        function newAnalysis() {
            console.log('é‡æ–°æµ‹ç®—...');
            
            // é‡ç½®æ”¯ä»˜è§£é”çŠ¶æ€
            isPaymentUnlocked = false;
            
            // é”å®šä¸‹è½½æŒ‰é’®
            lockDownloadButton();
            
            // éšè—åˆ†æç»“æœåŒºåŸŸ
            const analysisResultSection = document.getElementById('analysis-result-section');
            if (analysisResultSection) {
                analysisResultSection.style.display = 'none';
            }
            
            // é‡ç½®é”å®šå†…å®¹æ˜¾ç¤º
            const lockedOverlay = document.getElementById('locked-overlay');
            if (lockedOverlay) {
                lockedOverlay.style.display = 'flex';
                lockedOverlay.style.background = 'rgba(255, 255, 255, 0.95)';
            }
            
            const lockedContentDiv = document.getElementById('locked-content');
            if (lockedContentDiv) {
                lockedContentDiv.style.display = 'block';
            }
            
            // é‡ç½®å…è´¹å†…å®¹
            const freeAnalysisText = document.getElementById('free-analysis-text');
            if (freeAnalysisText) {
                freeAnalysisText.innerHTML = '';
            }
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.onload = initPage;
    </script>
</body>
</html>
